
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{f as q,K as F,t as I,r as K,B as R,C as M,F as j,h as l,ap as G,o as p,c as J,a as t,w as a,b as i,k as o,q as O,D as Q,i as f,l as g,ai as W,N as X,an as Y,e as Z,_ as ee}from"./index-B13k3BKp.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-CTg1rqxj.js";import{a as ae}from"./index-CkpWNzw4.js";import{u as oe}from"./usePagination-WDlvH5VE.js";import{u as le}from"./useTabbar-CTRLO9y6.js";const ne={style:{width:"140px"}},se=q({name:"SettingBasisDictionaryList",__name:"list",setup(ie){const b=F(),{pagination:r,getParams:k,onSizeChange:w,onCurrentChange:x}=oe(),h=le(),m=I(),e=K({loading:!1,tableAutoHeight:!1,formMode:"router",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],detailList:[],defaultProps:{children:"children",label:"label"}});R(()=>{d(),e.value.formMode==="router"&&M.on("get-data-list",()=>{d()})}),j(()=>{e.value.formMode==="router"&&M.off("get-data-list")});function d(){e.value.loading=!0;const n={...k(),...e.value.search.title&&{title:e.value.search.title}};ae.list(n).then(c=>{e.value.loading=!1,e.value.dataList=c.data,r.value.total=c.data.total})}function P(n){w(n).then(()=>d())}function z(n=1){x(n).then(()=>d())}function B(){e.value.formMode==="router"?m.settings.tabbar.enable&&m.settings.tabbar.mergeTabsBy!=="activeMenu"?h.open({name:"basis_dictionaryCreate"}):b.push({name:"basis_dictionaryCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function L(n){e.value.formMode==="router"?m.settings.tabbar.enable&&m.settings.tabbar.mergeTabsBy!=="activeMenu"?h.open({name:"basis_dictionaryEdit",params:{id:n.id}}):b.push({name:"basis_dictionaryEdit",params:{id:n.id}}):(e.value.formModeProps.id=n.id,e.value.formModeProps.visible=!0)}return(n,c)=>{const S=Y,u=l("el-button"),D=l("el-input"),V=l("el-tooltip"),v=l("el-tag"),E=l("el-tree"),y=l("el-card"),C=l("el-col"),_=l("el-table-column"),N=l("el-empty"),T=l("el-table"),H=l("el-row"),$=l("ElPagination"),A=Z,U=G("loading");return p(),J("div",{class:X({"absolute-container":o(e).tableAutoHeight})},[t(S,{title:"基础字典管理"}),t(A,null,{default:a(()=>[t(H,{gutter:20},{default:a(()=>[t(C,{lg:6,md:8,sm:24,xl:4,xs:24},{default:a(()=>[t(y,{shadow:"hover"},{default:a(()=>[t(u,{class:"tree-button",icon:"",type:"primary",onClick:B},{default:a(()=>[i(" 添加字典分类 ")]),_:1}),t(D,{placeholder:"请输入字典名称",clearable:""}),t(E,{props:o(e).defaultProps,"highlight-current":!0,"node-key":"id","default-expand-all":"","default-expanded-keys":["root"],data:o(e).dataList},{default:a(({data:s})=>[t(V,{class:"box-item",effect:"dark",content:s.code,placement:"left"},{default:a(()=>[O("span",ne,Q(s.name),1)]),_:2},1032,["content"]),t(v,{style:{float:"right"},onClick:L},{default:a(()=>[i(" 编辑 ")]),_:1}),s.children?g("",!0):(p(),f(v,{key:0,class:"ml-2",type:"danger",style:{float:"right"}},{default:a(()=>[i(" 删除 ")]),_:1}))]),_:1},8,["props","data"])]),_:1})]),_:1}),t(C,{lg:18,md:16,sm:24,xl:20,xs:24},{default:a(()=>[t(y,{shadow:"hover"},{default:a(()=>[t(u,{type:"primary"},{default:a(()=>[i(" 添加 ")]),_:1}),W((p(),f(T,{data:o(e).detailList,lazy:"",border:"","row-key":"value","tree-props":{children:"children",hasChildren:"hasChildren"}},{empty:a(()=>[t(N,{description:"暂无数据"})]),default:a(()=>[t(_,{label:"key值",prop:"key","show-overflow-tooltip":""}),t(_,{label:"字典值",prop:"value","show-overflow-tooltip":""}),t(_,{label:"备注",prop:"remark","show-overflow-tooltip":""}),t(_,{label:"操作","show-overflow-tooltip":"",width:"400"},{default:a(({row:s})=>[s.level<3?(p(),f(u,{key:0,text:"",type:"primary"},{default:a(()=>[i(" 添加子项 ")]),_:1})):g("",!0),t(u,{text:"",type:"primary"},{default:a(()=>[i(" 编辑 ")]),_:1}),t(u,{text:"",type:"primary"},{default:a(()=>[i(" 删除 ")]),_:1})]),_:1})]),_:1},8,["data"])),[[U,o(e).loading]])]),_:1})]),_:1})]),_:1}),t($,{"current-page":o(r).page,total:o(r).total,"page-size":o(r).size,"page-sizes":o(r).sizes,layout:o(r).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:P,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(e).formMode==="dialog"||o(e).formMode==="drawer"?(p(),f(te,{key:0,id:o(e).formModeProps.id,modelValue:o(e).formModeProps.visible,"onUpdate:modelValue":c[0]||(c[0]=s=>o(e).formModeProps.visible=s),mode:o(e).formMode,onSuccess:d},null,8,["id","modelValue","mode"])):g("",!0)],2)}}}),me=ee(se,[["__scopeId","data-v-f018b128"]]);export{me as default};
