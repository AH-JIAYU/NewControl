
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Ue}from"./index-H-UkSBWd.js";import{af as $,ae as Me,r as i,c as Se,d as Le,t as Be,ak as T,a as v,ai as Oe,o as u,b as V,aj as B,f as t,w as l,e as o,Y as O,Z as N,j as r,g as p,x as f,au as K,aZ as Ne,av as W,c9 as j,$ as Z,ap as Re,E as $e,bG as Te,bE as je,y as R,I as De,ag as se}from"./index-CcnRRDsH.js";import{_ as ze}from"./index-BqutmvQi.js";import{a as Fe}from"./tenant_tenantMenu-BoL31xBr.js";const pe={list:m=>$.post("/tenant-incomplete-menu/getMenuList",m),create:m=>$.post("/tenant-incomplete-menu/insertMenu",m),edit:m=>$.post("/tenant-incomplete-menu/updateMenu",m),delete:m=>$.post("/tenant-incomplete-menu/deleteMenu",m)},Pe=Me("clientsTenantMenu",()=>{const m=i([]),D=Se(async()=>{if(m.value.length)return m.value;const{data:k}=await Fe.list({type:"normal"});return k});return{tenantMenu:m,gettenantMenu:D}}),qe=Pe,b=m=>(Te("data-v-9e17cdff"),m=m(),je(),m),Ae={class:"absolute-container"},Ke={class:"page-main"},We={style:{float:"left"}},Ze={style:{float:"right","font-size":"13px",color:"var(--el-text-color-secondary)"}},Ge=b(()=>f("span",{class:"label-tip"},"即 name ，系统唯一",-1)),He={class:"label-tip"},Je={class:"flex gap-2"},Ye=b(()=>f("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)),Qe={class:"label-tip"},Xe={class:"label-tip"},el=b(()=>f("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1)),ll=b(()=>f("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)),al=b(()=>f("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)),tl=b(()=>f("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)),nl=b(()=>f("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)),ul=b(()=>f("span",{class:"label-tip"},"请设置有效的长度单位，例如：px/em/rem等",-1)),re=Le({name:"PagesExampleMenuDetail",__name:"index",props:["id","parentId","row","menuLevel"],setup(m,{expose:D}){const k=m,ie=qe(),y=i(!1),w=i(),z=i(!1),x=i(),I=i([]),me=i([{value:1,label:"一级导航"},{value:2,label:"二级导航"},{value:3,label:"三级导航"},{value:4,label:"内置页面"}]),E=i(""),F=i(!1),e=i({id:k.id??"",parentId:k.parentId??"",path:"",redirect:"",name:"",component:"",sort:"",menuLevel:k.menuLevel??"",navigation:"",key:[],meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,alwaysOpened:!1,permanent:!1,menu:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",newWindow:!1,link:"",iframe:"",copyright:!1,paddingBottom:"0px"}}),G=i();function ve(c){e.value.key.splice(e.value.key.indexOf(c),1)}function ce(){F.value=!0,Z(()=>{G.value.input.focus()})}function H(){E.value&&(e.value.key=e.value.key||[],e.value.key.push(E.value)),F.value=!1,E.value=""}const fe=i({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});function U(c,n){const M=[];function S(L){if(Array.isArray(L))for(const d of L)d.menuLevel===n&&M.push(d),Array.isArray(d.children)&&S(d.children)}return S(c),M}function _e(c){c===1?I.value=U(x.value,1):c===2?I.value=U(x.value,2):c===3?I.value=U(x.value,3):I.value=U(x.value,4)}Be(async()=>{x.value=await ie.gettenantMenu,I.value=U(x.value,e.value.menuLevel),z.value=!e.value.id&&!e.value.parentId,e.value.id!==""&&be()});function be(){y.value=!0,e.value.id&&(e.value=JSON.parse(k.row),y.value=!1)}const h=i(""),P=i(!1),J=i();function ye(c){typeof e.value.meta.cache=="object"&&e.value.meta.cache.splice(e.value.meta.cache.indexOf(c),1)}function ge(){P.value=!0,Z(()=>{J.value.input.focus()})}function Y(){h.value&&typeof e.value.meta.cache=="object"&&(e.value.meta.cache.includes(h.value)?T.warning("规则已存在"):e.value.meta.cache.push(h.value)),P.value=!1,h.value=""}const C=i(""),q=i(!1),Q=i();function Ve(c){e.value.meta.noCache.splice(e.value.meta.noCache.indexOf(c),1)}function ke(){q.value=!0,Z(()=>{Q.value.input.focus()})}function X(){C.value&&(e.value.meta.noCache.includes(C.value)?T.warning("规则已存在"):e.value.meta.noCache.push(C.value)),q.value=!1,C.value=""}return D({submit(){return new Promise(c=>{e.value.id===""?w.value&&w.value.validate(n=>{n&&(e.value.menuLevel=Number(e.value.menuLevel)+1,y.value=!0,pe.create(e.value).then(()=>{y.value=!1,T.success({message:"新增成功",center:!0}),c()}))}):w.value&&w.value.validate(n=>{n&&(y.value=!0,pe.edit(e.value).then(()=>{y.value=!1,T.success({message:"编辑成功",center:!0}),c()}))})})}}),(c,n)=>{const M=Re,S=v("el-option"),L=v("el-select"),d=v("ElFormItem"),s=v("ElCol"),_=v("ElInput"),A=v("ElLink"),ee=v("ElRow"),xe=v("el-tag"),Ie=v("el-input"),he=v("el-button"),le=ze,g=v("ElSwitch"),ae=$e,te=v("ElTooltip"),ne=v("ElTag"),ue=v("ElButton"),oe=v("ElSpace"),Ce=Ue,we=v("ElForm"),Ee=Oe("loading");return u(),V("div",Ae,[B((u(),V("div",Ke,[t(we,{ref_key:"formRef",ref:w,model:e.value,rules:fe.value,"label-position":"top"},{default:l(()=>[t(Ce,{"right-side-width":"500px","hide-right-side-toggle":"",style:{"padding-bottom":"100px"}},{default:l(()=>[t(M,{title:"基础配置",content:"标准路由配置，包含 path/redirect/name/component"}),t(ee,{gutter:30,style:{padding:"20px"}},{default:l(()=>[e.value.parentId||z.value?(u(),o(s,{key:0,xl:12,lg:24},{default:l(()=>[t(d,{label:"路由等级"},{default:l(()=>[t(L,{modelValue:e.value.menuLevel,"onUpdate:modelValue":n[0]||(n[0]=a=>e.value.menuLevel=a),clear:"","value-key":"",placeholder:"",clearable:"",filterable:"",onChange:_e},{default:l(()=>[(u(!0),V(O,null,N(me.value,a=>(u(),o(S,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId||z.value?(u(),o(s,{key:1,xl:12,lg:24},{default:l(()=>[t(d,{label:"父级导航"},{default:l(()=>[t(L,{modelValue:e.value.parentId,"onUpdate:modelValue":n[1]||(n[1]=a=>e.value.parentId=a),clear:"","value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(u(!0),V(O,null,N(I.value,a=>(u(),o(S,{key:a.id,label:a.meta.title,value:a.id},{default:l(()=>[f("span",We,R(a.meta.title),1),f("span",Ze,R(a.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):r("",!0),t(s,{xl:12,lg:24},{default:l(()=>[t(d,{label:"排序",prop:"redirect"},{default:l(()=>[t(_,{modelValue:e.value.sort,"onUpdate:modelValue":n[2]||(n[2]=a=>e.value.sort=a),clearable:"",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1}),e.value.parentId?(u(),o(s,{key:2,xl:12,lg:24},{default:l(()=>[t(d,{label:"路由地址",prop:"path"},{default:l(()=>[t(_,{modelValue:e.value.path,"onUpdate:modelValue":n[3]||(n[3]=a=>e.value.path=a),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:3,xl:12,lg:24},{default:l(()=>[t(d,{label:"重定向",prop:"redirect"},{default:l(()=>[t(_,{modelValue:e.value.redirect,"onUpdate:modelValue":n[4]||(n[4]=a=>e.value.redirect=a),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:4,xl:12,lg:24},{default:l(()=>[t(d,{prop:"name"},{label:l(()=>[p(" 路由命名 "),Ge]),default:l(()=>[t(_,{modelValue:e.value.name,"onUpdate:modelValue":n[5]||(n[5]=a=>e.value.name=a),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:5,xl:12,lg:24},{default:l(()=>[t(d,{prop:"component"},{label:l(()=>[p(" 组件路径 "),f("span",He,[p(" 顶级路由请设置“"),t(A,{type:"primary",underline:!1,onClick:n[6]||(n[6]=K(a=>e.value.component="Layout",["prevent"]))},{default:l(()=>[p("Layout ")]),_:1}),p("”，中间层级路由无需设置 ")])]),default:l(()=>[t(_,{modelValue:e.value.component,"onUpdate:modelValue":n[7]||(n[7]=a=>e.value.component=a),clearable:"",placeholder:"请输入完整组件路径"},Ne({_:2},[e.value.component!=="Layout"?{name:"prepend",fn:l(()=>[p(" /src/views/ ")]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})):r("",!0)]),_:1}),t(M,{title:"扩展配置"}),t(ee,{gutter:30,style:{padding:"20px"}},{default:l(()=>[t(s,{xl:12,lg:24},{default:l(()=>[t(d,{label:"显示名称",prop:"meta.title"},{default:l(()=>[t(_,{modelValue:e.value.meta.title,"onUpdate:modelValue":n[8]||(n[8]=a=>e.value.meta.title=a),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{xl:12,lg:24},{default:l(()=>[t(d,{label:"模块接口"},{default:l(()=>[f("div",Je,[(u(!0),V(O,null,N(e.value.key,a=>(u(),o(xe,{key:a,closable:"","disable-transitions":!1,onClose:de=>ve(a)},{default:l(()=>[p(R(a),1)]),_:2},1032,["onClose"]))),128)),F.value?(u(),o(Ie,{key:0,ref_key:"InputRef",ref:G,modelValue:E.value,"onUpdate:modelValue":n[9]||(n[9]=a=>E.value=a),class:"w-20",size:"small",onKeyup:W(H,["enter"]),onBlur:H},null,8,["modelValue"])):(u(),o(he,{key:1,class:"button-new-tag",size:"small",onClick:ce},{default:l(()=>[p(" + 添加 ")]),_:1}))])]),_:1})]),_:1}),t(s,{xl:12,lg:24},{default:l(()=>[t(d,{label:"默认图标",prop:"meta.icon"},{default:l(()=>[t(le,{modelValue:e.value.meta.icon,"onUpdate:modelValue":n[10]||(n[10]=a=>e.value.meta.icon=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{xl:12,lg:24},{default:l(()=>[t(d,{label:"激活图标",prop:"meta.activeIcon"},{default:l(()=>[t(le,{modelValue:e.value.meta.activeIcon,"onUpdate:modelValue":n[11]||(n[11]=a=>e.value.meta.activeIcon=a)},null,8,["modelValue"])]),_:1})]),_:1}),e.value.parentId?(u(),o(s,{key:0,xl:12,lg:24},{default:l(()=>[t(d,{label:"默认展开",prop:"meta.defaultOpened"},{default:l(()=>[t(g,{modelValue:e.value.meta.defaultOpened,"onUpdate:modelValue":n[12]||(n[12]=a=>e.value.meta.defaultOpened=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:1,xl:12,lg:24},{default:l(()=>[t(d,{label:"始终展开",prop:"meta.alwaysOpened"},{default:l(()=>[t(g,{modelValue:e.value.meta.alwaysOpened,"onUpdate:modelValue":n[13]||(n[13]=a=>e.value.meta.alwaysOpened=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:2,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.permanent"},{label:l(()=>[p(" 常驻标签页 "),Ye]),default:l(()=>[t(g,{modelValue:e.value.meta.permanent,"onUpdate:modelValue":n[14]||(n[14]=a=>e.value.meta.permanent=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:3,xl:12,lg:24},{default:l(()=>[t(d,{label:"在导航显示",prop:"meta.menu"},{default:l(()=>[t(g,{modelValue:e.value.meta.menu,"onUpdate:modelValue":n[15]||(n[15]=a=>e.value.meta.menu=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:4,xl:12,lg:24},{default:l(()=>[t(d,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:l(()=>[t(g,{modelValue:e.value.meta.breadcrumb,"onUpdate:modelValue":n[16]||(n[16]=a=>e.value.meta.breadcrumb=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:5,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.cache"},{label:l(()=>[p(" 缓存规则 "),t(te,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:l(()=>[t(ae,{name:"i-ri:question-line"})]),_:1}),B(f("span",Qe,[p("切换为"),t(A,{type:"primary",underline:!1,onClick:n[17]||(n[17]=K(a=>e.value.meta.cache=!0,["prevent"]))},{default:l(()=>[p("始终缓存")]),_:1})],512),[[j,typeof e.value.meta.cache=="object"]]),B(f("span",Xe,[p("切换为"),t(A,{type:"primary",underline:!1,onClick:n[18]||(n[18]=K(a=>e.value.meta.cache=[],["prevent"]))},{default:l(()=>[p("规则模式")]),_:1})],512),[[j,typeof e.value.meta.cache=="boolean"]])]),default:l(()=>[B(t(oe,null,{default:l(()=>[(u(!0),V(O,null,N(e.value.meta.cache,a=>(u(),o(ne,{key:a,size:"large",closable:"","disable-transitions":!1,onClose:de=>ye(a)},{default:l(()=>[p(R(a),1)]),_:2},1032,["onClose"]))),128)),P.value?(u(),o(_,{key:0,ref_key:"InputCacheRef",ref:J,modelValue:h.value,"onUpdate:modelValue":n[19]||(n[19]=a=>h.value=a),style:{width:"200px"},onKeyup:W(Y,["enter"]),onBlur:Y},null,8,["modelValue"])):(u(),o(ue,{key:1,onClick:ge},{default:l(()=>[p(" 新增 ")]),_:1}))]),_:1},512),[[j,typeof e.value.meta.cache=="object"]]),B(f("div",null," 始终缓存 ",512),[[j,typeof e.value.meta.cache=="boolean"]])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:6,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.noCache"},{label:l(()=>[p(" 不缓存规则 "),t(te,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:l(()=>[t(ae,{name:"i-ri:question-line"})]),_:1}),el]),default:l(()=>[t(oe,null,{default:l(()=>[(u(!0),V(O,null,N(e.value.meta.noCache,a=>(u(),o(ne,{key:a,size:"large",closable:"","disable-transitions":!1,onClose:de=>Ve(a)},{default:l(()=>[p(R(a),1)]),_:2},1032,["onClose"]))),128)),q.value?(u(),o(_,{key:0,ref_key:"InputNoCacheRef",ref:Q,modelValue:C.value,"onUpdate:modelValue":n[20]||(n[20]=a=>C.value=a),style:{width:"200px"},onKeyup:W(X,["enter"]),onBlur:X},null,8,["modelValue"])):(u(),o(ue,{key:1,onClick:ke},{default:l(()=>[p(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:7,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.activeMenu"},{label:l(()=>[p(" 高亮导航 "),ll]),default:l(()=>[t(_,{modelValue:e.value.meta.activeMenu,"onUpdate:modelValue":n[21]||(n[21]=a=>e.value.meta.activeMenu=a),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:8,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.badge"},{label:l(()=>[p(" 徽标 "),al]),default:l(()=>[t(_,{modelValue:e.value.meta.badge,"onUpdate:modelValue":n[22]||(n[22]=a=>e.value.meta.badge=a),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:9,xl:12,lg:24},{default:l(()=>[t(d,{label:"新窗口打开",prop:"meta.newWindow"},{default:l(()=>[t(g,{modelValue:e.value.meta.newWindow,"onUpdate:modelValue":n[23]||(n[23]=a=>e.value.meta.newWindow=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:10,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.link"},{label:l(()=>[p(" 访问外链 "),tl]),default:l(()=>[t(_,{modelValue:e.value.meta.link,"onUpdate:modelValue":n[24]||(n[24]=a=>e.value.meta.link=a),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:11,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.iframe"},{label:l(()=>[p(" 内嵌网页 "),nl]),default:l(()=>[t(_,{modelValue:e.value.meta.iframe,"onUpdate:modelValue":n[25]||(n[25]=a=>e.value.meta.iframe=a),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:12,xl:12,lg:24},{default:l(()=>[t(d,{label:"底部版权",prop:"meta.copyright"},{default:l(()=>[t(g,{modelValue:e.value.meta.copyright,"onUpdate:modelValue":n[26]||(n[26]=a=>e.value.meta.copyright=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(u(),o(s,{key:13,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.paddingBottom"},{label:l(()=>[p(" 底部填充高度 "),ul]),default:l(()=>[t(_,{modelValue:e.value.meta.paddingBottom,"onUpdate:modelValue":n[27]||(n[27]=a=>e.value.meta.paddingBottom=a),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[Ee,y.value]])])}}});typeof se=="function"&&se(re);const ol=De(re,[["__scopeId","data-v-9e17cdff"]]),il=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"}));export{ol as D,pe as a,il as i,qe as u};
