
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ah as m,ag as j,r as i,g as B,f as P,y as R,ai as h,h as d,aj as q,ak as L,k as l,o as u,c as g,a as n,w as r,$ as S,a0 as E,i as v,l as N,_ as O}from"./index-Bnomq2O6.js";import{u as z}from"./country-D-vgNsXe.js";import{a as A}from"./setting_versionManagement-ClcpjJKi.js";const T={list:a=>m.post("tenant-control/get/getTenant",a),create:a=>m.post("tenant-control/insert/insertTenant",a),edit:a=>m.post("tenant-control/update/updateTenantStatus",a),export:a=>m.post("tenant-control/export/exportTenantList",a),reset:a=>m.post("tenant-user/update/resetPassword",a)},G=j("version",()=>{const a=i([]),f=B(async()=>{if(a.value.length)return a.value;const{data:_}=await A.list();return _});return{versionMenu:a,getVersion:f}}),H=G,U="创建完成后，请告知用户初始密码：123456",J=P({__name:"index",props:{id:{default:""}},setup(a,{expose:f}){const _=a,C=z(),F=H(),b=i(!1),p=i(),t=i({id:_.id,name:"",country:"",phoneNumber:"",email:"",version:"",active:1,registerType:"phone"}),y=i([]),x=i([]),I=i({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}]});return R(async()=>{b.value=!0,y.value=await C.getCountry,x.value=await F.getVersion,b.value=!1}),f({submit(){return new Promise(V=>{t.value.id===""?p.value&&p.value.validate(o=>{t.value.registerType=t.value.country==="343"?"phone":"email",o&&T.create(t.value).then(()=>{h.success({message:"模拟新增成功",center:!0}),V()})}):p.value&&p.value.validate(o=>{o&&T.edit(t.value).then(()=>{h.success({message:"模拟编辑成功",center:!0}),V()})})})}}),(V,o)=>{const c=d("ElInput"),s=d("ElFormItem"),w=d("el-option"),k=d("el-select"),D=d("el-switch"),M=d("ElForm"),$=q("loading");return L((u(),g("div",null,[n(M,{ref_key:"formRef",ref:p,model:l(t),rules:l(I),"label-width":"120px","label-suffix":"："},{default:r(()=>[n(s,{label:"用户名",prop:"name"},{default:r(()=>[n(c,{modelValue:l(t).name,"onUpdate:modelValue":o[0]||(o[0]=e=>l(t).name=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),n(s,{label:"国家",prop:"country"},{default:r(()=>[n(k,{modelValue:l(t).country,"onUpdate:modelValue":o[1]||(o[1]=e=>l(t).country=e),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:r(()=>[(u(!0),g(S,null,E(l(y).records,e=>(u(),v(w,{key:e.id,label:e.chineseName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(t).country==="343"?(u(),v(s,{key:0,label:"手机号码",prop:"phoneNumber"},{default:r(()=>[n(c,{modelValue:l(t).phoneNumber,"onUpdate:modelValue":o[2]||(o[2]=e=>l(t).phoneNumber=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})):N("",!0),l(t).country!=="343"?(u(),v(s,{key:1,label:"电子邮箱",prop:"email"},{default:r(()=>[n(c,{modelValue:l(t).email,"onUpdate:modelValue":o[3]||(o[3]=e=>l(t).email=e),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})):N("",!0),n(s,{label:"初始密码",prop:"password"},{default:r(()=>[n(c,{modelValue:U,"onUpdate:modelValue":o[4]||(o[4]=e=>U=e),disabled:"",placeholder:"请输入登录密码"})]),_:1}),n(s,{label:"版本分配",prop:"role"},{default:r(()=>[n(k,{modelValue:l(t).version,"onUpdate:modelValue":o[5]||(o[5]=e=>l(t).version=e),placeholder:"请选择版本"},{default:r(()=>[(u(!0),g(S,null,E(l(x),e=>(u(),v(w,{key:e.id,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(s,{label:"租户状态",prop:"active"},{default:r(()=>[n(D,{modelValue:l(t).active,"onUpdate:modelValue":o[6]||(o[6]=e=>l(t).active=e),"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[$,l(b)]])}}}),K=O(J,[["__scopeId","data-v-6015cf0b"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as D,T as a,Y as i};
