
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as F}from"./setting_user-DS-uiCN3.js";import{a as U}from"./setting_role-De54HWdL.js";import{ag as I,r as n,g as z,f as N,m as V,u as $,y as j,h as r,aj as q,o as i,c as k,ak as L,k as o,i as w,w as l,a as u,b as E,$ as P,a0 as T,co as A,ai as G,_ as H}from"./index-vWDRJyOK.js";const J=I("buttonPermission",()=>{const t=n([]),d=z(async()=>{if(t.value.length)return t.value;const{data:c}=await U.list();return c});return{role:t,getRole:d}}),K=J,O="分配角色",Q=N({__name:"index",props:V(["id","row"],{modelValue:{default:!1},modelModifiers:{}}),emits:V(["success"],["update:modelValue"]),setup(t,{emit:d}){const c=t,y=d,x=K(),m=n(!1),f=n(),a=n({id:c.row.id,role:"",account:""}),R=n({role:[{required:!0,message:"请选择角色码",trigger:"blur"}]}),_=n(),p=$(t,"modelValue");a.value.account=c.row.account;function C(){a.value.id&&f.value&&f.value.validate(g=>{g&&F.setUserRole(a.value).then(s=>{G.success({message:s.status===1?"角色赋予成功":"接口异常",center:!0}),y("success"),v()})})}j(async()=>{m.value=!0,_.value=await x.getRole,m.value=!1});function v(){p.value=!1}return(g,s)=>{const h=r("el-option"),B=r("el-select"),M=r("ElFormItem"),b=r("ElButton"),S=r("ElDialog"),D=q("loading");return i(),k("div",null,[L((i(),w(S,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),title:O,width:"30%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:l(()=>[u(b,{size:"large",onClick:v},{default:l(()=>[E(" 取消 ")]),_:1}),u(b,{type:"primary",size:"large",onClick:C},{default:l(()=>[E(" 确定 ")]),_:1})]),default:l(()=>[u(o(A),{ref_key:"formRef",ref:f,inline:!0,rules:o(R),model:o(a),"label-width":"120px","label-suffix":":"},{default:l(()=>[u(M,{label:"角色",prop:"role"},{default:l(()=>[u(B,{modelValue:o(a).role,"onUpdate:modelValue":s[0]||(s[0]=e=>o(a).role=e),placeholder:"请选择角色"},{default:l(()=>[(i(!0),k(P,null,T(o(_),e=>(i(),w(h,{key:e.id,label:e.role,value:e.role},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])),[[D,o(m)]])])}}}),Z=H(Q,[["__scopeId","data-v-3c52d038"]]);export{Z as default};
