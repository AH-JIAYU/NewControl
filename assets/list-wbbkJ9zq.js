
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as B,r as T,t as V,a as u,ai as w,o as i,b as y,f as o,w as a,g as s,aj as $,e as r,x as h,y as c,j as p,J as D,cm as N,ak as j,E as A,ah as H,I as J,ag as M}from"./index-D_pmL2Eu.js";import F from"./index-DEZjzaDh.js";import{a as k}from"./tenant_tenantMenu-C7GZ_rt_.js";import{u as O}from"./tenantMenu-B4f95nrO.js";import"./index-CK_ggkpj.js";import"./index-C8ttiuLS.js";import"./index-X9G9E31N.js";const U=["title"],q=["title"],G={style:{display:"flex","justify-content":"center"}},P=B({name:"tenantMenu",__name:"list",setup(K){const C=O(),t=T({loading:!1,tableAutoHeight:!0,dataList:[],formModeProps:{visible:!1,id:"",parentId:""}});V(()=>{f()});function f(){t.value.loading=!0,k.list({type:"normal"}).then(l=>{C.tenantMenu=l.data,t.value.loading=!1,t.value.dataList=l.data})}function g(l){t.value.formModeProps.id="",t.value.formModeProps.parentId=l.id??"",t.value.formModeProps.menuLevel=l.menuLevel??"",t.value.formModeProps.visible=!0}function E(l){t.value.formModeProps.id=l.id??"",t.value.formModeProps.menuLevel=l.menuLevel-1,t.value.formModeProps.row=JSON.stringify(l),t.value.formModeProps.parentId=l.parentId??"",t.value.formModeProps.visible=!0}function x(l){N.confirm(`确认删除「${l.meta.title}」吗？`,"确认信息").then(()=>{t.value.loading=!0,k.delete({id:l.id}).then(d=>{t.value.loading=!1,f(),j[d.status===1?"success":"error"]({message:d.status===1?"删除成功":"请求失败",center:!0})})}).catch(()=>{})}return(l,d)=>{const _=A,m=u("ElButton"),L=u("ElSpace"),n=u("ElTableColumn"),v=u("ElTag"),I=u("ElTable"),S=H,z=w("loading");return i(),y("div",{class:D({"absolute-container":t.value.tableAutoHeight})},[o(S,null,{default:a(()=>[o(L,null,{default:a(()=>[o(m,{type:"primary",size:"default",onClick:g},{icon:a(()=>[o(_,{name:"i-ep:plus"})]),default:a(()=>[s(" 新增主导航 ")]),_:1})]),_:1}),$((i(),r(I,{class:"mt-4",data:t.value.dataList,"row-key":"id",stripe:"","highlight-current-row":"","default-expand-all":"",border:"",height:"100%"},{default:a(()=>[o(n,{prop:"meta.title",label:"标题","min-width":"200",fixed:"left"}),o(n,{label:"路由",width:"200"},{default:a(({row:e})=>[h("span",{title:e.path},c(e.path),9,U)]),_:1}),o(n,{label:"页面组件",width:"200"},{default:a(({row:e})=>[e.component==="Layout"?(i(),r(v,{key:0},{default:a(()=>[s(" Layout ")]),_:1})):(i(),y("span",{key:1,title:e.component},c(e.component),9,q))]),_:1}),o(n,{label:"图标",width:"90",align:"center"},{default:a(({row:e})=>[h("div",G,[e.meta.icon?(i(),r(_,{key:0,name:e.meta.icon,size:24},null,8,["name"])):p("",!0)])]),_:1}),o(n,{label:"激活图标",width:"90",align:"center"},{default:a(({row:e})=>[e.meta.activeIcon?(i(),r(_,{key:0,name:e.meta.activeIcon,size:24},null,8,["name"])):p("",!0)]),_:1}),o(n,{label:"菜单",width:"80",align:"center"},{default:a(({row:e})=>[typeof e.meta.menu=="boolean"?(i(),r(v,{key:0,type:e.meta.menu?"success":"danger"},{default:a(()=>[s(c(e.meta.menu?"显示":"隐藏"),1)]),_:2},1032,["type"])):p("",!0)]),_:1}),o(n,{label:"面包屑",width:"80",align:"center"},{default:a(({row:e})=>[typeof e.meta.breadcrumb=="boolean"?(i(),r(v,{key:0,type:e.meta.breadcrumb?"success":"danger"},{default:a(()=>[s(c(e.meta.breadcrumb?"显示":"隐藏"),1)]),_:2},1032,["type"])):p("",!0)]),_:1}),o(n,{label:"操作",width:"250",align:"center",fixed:"right"},{default:a(e=>[o(m,{type:"info",size:"small",plain:"",onClick:b=>g(e.row)},{default:a(()=>[s(" 新增导航 ")]),_:2},1032,["onClick"]),o(m,{type:"primary",size:"small",plain:"",onClick:b=>E(e.row)},{default:a(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),o(m,{type:"danger",size:"small",plain:"",onClick:b=>x(e.row)},{default:a(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,t.value.loading]])]),_:1}),o(F,{id:t.value.formModeProps.id,modelValue:t.value.formModeProps.visible,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value.formModeProps.visible=e),"menu-level":t.value.formModeProps.menuLevel,"parent-id":t.value.formModeProps.parentId,row:t.value.formModeProps.row,onSuccess:f},null,8,["id","modelValue","menu-level","parent-id","row"])],2)}}});typeof M=="function"&&M(P);const te=J(P,[["__scopeId","data-v-920f5d3f"]]);export{te as default};
