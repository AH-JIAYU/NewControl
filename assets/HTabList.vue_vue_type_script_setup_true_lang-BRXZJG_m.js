
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as O,r as w,aL as M,aM as J,aN as K,h as x,aO as F,a2 as q,q as j,a1 as U,aj as X,ak as c,aP as V,aQ as Y,a4 as W,y as z,aR as _,aS as Z,aJ as ee,aT as h,aU as E,aV as ae,aW as te,aX as P,aY as I,m as R,u as le,o as C,j as L,w as N,a as ne,c as re,a5 as se,l as D,F as ue,Q as oe,n as ie,b as de,G as ce,M as ve}from"./index-C3PJOLdt.js";import{s as pe}from"./use-resolve-button-type-BBs0E0cm.js";let fe=O({props:{onFocus:{type:Function,required:!0}},setup(e){let v=w(!0);return()=>v.value?M(K,{as:"button",type:"button",features:J.Focusable,onFocus(d){d.preventDefault();let p,f=50;function s(){var l;if(f--<=0){p&&cancelAnimationFrame(p);return}if((l=e.onFocus)!=null&&l.call(e)){v.value=!1,cancelAnimationFrame(p);return}p=requestAnimationFrame(s)}p=requestAnimationFrame(s)}}):null}});var me=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(me||{}),be=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(be||{});let H=Symbol("TabsContext");function G(e){let v=z(H,null);if(v===null){let d=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,G),d}return v}let Q=Symbol("TabsSSRContext"),xe=O({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:v,attrs:d,emit:p}){var f;let s=w((f=e.selectedIndex)!=null?f:e.defaultIndex),l=w([]),n=w([]),y=x(()=>e.selectedIndex!==null),T=x(()=>y.value?e.selectedIndex:s.value);function g(t){var r;let o=F(u.tabs.value,c),a=F(u.panels.value,c),i=o.filter(m=>{var b;return!((b=c(m))!=null&&b.hasAttribute("disabled"))});if(t<0||t>o.length-1){let m=_(s.value===null?0:Math.sign(t-s.value),{[-1]:()=>1,0:()=>_(Math.sign(t),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),b=_(m,{0:()=>o.indexOf(i[0]),1:()=>o.indexOf(i[i.length-1])});b!==-1&&(s.value=b),u.tabs.value=o,u.panels.value=a}else{let m=o.slice(0,t),b=[...o.slice(t),...m].find(B=>i.includes(B));if(!b)return;let S=(r=o.indexOf(b))!=null?r:u.selectedIndex.value;S===-1&&(S=u.selectedIndex.value),s.value=S,u.tabs.value=o,u.panels.value=a}}let u={selectedIndex:x(()=>{var t,r;return(r=(t=s.value)!=null?t:e.defaultIndex)!=null?r:null}),orientation:x(()=>e.vertical?"vertical":"horizontal"),activation:x(()=>e.manual?"manual":"auto"),tabs:l,panels:n,setSelectedIndex(t){T.value!==t&&p("change",t),y.value||g(t)},registerTab(t){var r;if(l.value.includes(t))return;let o=l.value[s.value];l.value.push(t),l.value=F(l.value,c);let a=(r=l.value.indexOf(o))!=null?r:s.value;a!==-1&&(s.value=a)},unregisterTab(t){let r=l.value.indexOf(t);r!==-1&&l.value.splice(r,1)},registerPanel(t){n.value.includes(t)||(n.value.push(t),n.value=F(n.value,c))},unregisterPanel(t){let r=n.value.indexOf(t);r!==-1&&n.value.splice(r,1)}};q(H,u);let k=w({tabs:[],panels:[]}),$=w(!1);j(()=>{$.value=!0}),q(Q,x(()=>$.value?null:k.value));let A=x(()=>e.selectedIndex);return j(()=>{U([A],()=>{var t;return g((t=e.selectedIndex)!=null?t:e.defaultIndex)},{immediate:!0})}),X(()=>{if(!y.value||T.value==null||u.tabs.value.length<=0)return;let t=F(u.tabs.value,c);t.some((r,o)=>c(u.tabs.value[o])!==c(r))&&u.setSelectedIndex(t.findIndex(r=>c(r)===c(u.tabs.value[T.value])))}),()=>{let t={selectedIndex:s.value};return M(W,[l.value.length<=0&&M(fe,{onFocus:()=>{for(let r of l.value){let o=c(r);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),V({theirProps:{...d,...Y(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:t,slots:v,attrs:d,name:"TabGroup"})])}}}),ge=O({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:v,slots:d}){let p=G("TabList");return()=>{let f={selectedIndex:p.selectedIndex.value},s={role:"tablist","aria-orientation":p.orientation.value};return V({ourProps:s,theirProps:e,slot:f,attrs:v,slots:d,name:"TabList"})}}}),he=O({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:v,slots:d,expose:p}){var f;let s=(f=e.id)!=null?f:`headlessui-tabs-tab-${Z()}`,l=G("Tab"),n=w(null);p({el:n,$el:n}),j(()=>l.registerTab(n)),ee(()=>l.unregisterTab(n));let y=z(Q),T=x(()=>{if(y.value){let a=y.value.tabs.indexOf(s);return a===-1?y.value.tabs.push(s)-1:a}return-1}),g=x(()=>{let a=l.tabs.value.indexOf(n);return a===-1?T.value:a}),u=x(()=>g.value===l.selectedIndex.value);function k(a){var i;let m=a();if(m===E.Success&&l.activation.value==="auto"){let b=(i=te(n))==null?void 0:i.activeElement,S=l.tabs.value.findIndex(B=>c(B)===b);S!==-1&&l.setSelectedIndex(S)}return m}function $(a){let i=l.tabs.value.map(m=>c(m)).filter(Boolean);if(a.key===h.Space||a.key===h.Enter){a.preventDefault(),a.stopPropagation(),l.setSelectedIndex(g.value);return}switch(a.key){case h.Home:case h.PageUp:return a.preventDefault(),a.stopPropagation(),k(()=>P(i,I.First));case h.End:case h.PageDown:return a.preventDefault(),a.stopPropagation(),k(()=>P(i,I.Last))}if(k(()=>_(l.orientation.value,{vertical(){return a.key===h.ArrowUp?P(i,I.Previous|I.WrapAround):a.key===h.ArrowDown?P(i,I.Next|I.WrapAround):E.Error},horizontal(){return a.key===h.ArrowLeft?P(i,I.Previous|I.WrapAround):a.key===h.ArrowRight?P(i,I.Next|I.WrapAround):E.Error}}))===E.Success)return a.preventDefault()}let A=w(!1);function t(){var a;A.value||(A.value=!0,!e.disabled&&((a=c(n))==null||a.focus({preventScroll:!0}),l.setSelectedIndex(g.value),ae(()=>{A.value=!1})))}function r(a){a.preventDefault()}let o=pe(x(()=>({as:e.as,type:v.type})),n);return()=>{var a;let i={selected:u.value},{...m}=e,b={ref:n,onKeydown:$,onMousedown:r,onClick:t,id:s,role:"tab",type:o.value,"aria-controls":(a=c(l.panels.value[g.value]))==null?void 0:a.id,"aria-selected":u.value,tabIndex:u.value?0:-1,disabled:e.disabled?!0:void 0};return V({ourProps:b,theirProps:m,slot:i,attrs:v,slots:d,name:"Tab"})}}});const ke=O({__name:"HTabList",props:R({options:{}},{modelValue:{},modelModifiers:{}}),emits:R(["change"],["update:modelValue"]),setup(e,{emit:v}){const d=e,p=v,f=le(e,"modelValue"),s=x({get(){return d.options.findIndex(n=>n.value===f.value)},set(n){f.value=d.options[n].value}});U(f,n=>{n&&p("change",n)});function l(n){f.value=d.options[n].value}return(n,y)=>{const T=ve;return C(),L(D(xe),{"selected-index":D(s),onChange:l},{default:N(()=>[ne(D(ge),{class:"inline-flex select-none items-center justify-center rounded-md bg-stone-1 p-1 ring-1 ring-stone-2 dark:bg-stone-9 dark:ring-stone-8"},{default:N(()=>[(C(!0),re(W,null,se(n.options,(g,u)=>(C(),L(D(he),{key:u,as:"template"},{default:N(({selected:k})=>[ue("button",{class:oe(["w-full inline-flex items-center justify-center gap-1 break-keep border-size-0 rounded-md bg-inherit px-2 py-1.5 text-sm text-dark ring-stone-2 ring-inset dark:text-white focus:outline-none focus:ring-2 dark:ring-stone-8",{"cursor-default bg-white dark:bg-dark-9":k,"cursor-pointer opacity-50 hover:opacity-100":!k}])},[g.icon?(C(),L(T,{key:0,name:g.icon,class:"flex-shrink-0"},null,8,["name"])):ie("",!0),de(" "+ce(g.label),1)],2)]),_:2},1024))),128))]),_:1})]),_:1},8,["selected-index"])}}});export{ke as _};
