
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{p as i,f as q,r as f,s as y,ao as E,h as d,ap as C,ai as S,k as t,o as _,c as V,a as o,w as r,b as v,a1 as D,a2 as G,i as M}from"./index-DliMWqTD.js";import{a as N}from"./setting_role-uwu1AqsV.js";import{u as O}from"./usePagination-BzieftIB.js";const b={list:a=>i.get("setting/user/list",{params:a,baseURL:"/mock/"}),detail:a=>i.get("setting/user/detail",{params:{id:a},baseURL:"/mock/"}),create:a=>i.post("setting/user/create",a,{baseURL:"/mock/"}),edit:a=>i.post("setting/user/edit",a,{baseURL:"/mock/"}),delete:a=>i.post("setting/user/delete",{id:a},{baseURL:"/mock/"}),passwordReset:a=>i.post("setting/user/password/reset",{id:a},{baseURL:"/mock/"}),changeStatus:a=>i.post("setting/user/change/status",a,{baseURL:"/mock/"}),check:a=>i.post("setting/user/check",a,{baseURL:"/mock/"})},j=q({__name:"index",props:{id:{default:""}},setup(a,{expose:R}){const U=a;O();const k=f([]),g=f(!1),c=f(),e=f({id:U.id,account:"",name:"",mobile:"",sex:"2",role_id:""}),x=f({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(n,l,m)=>{const u={key:"mobile",value:l};e.value.id!==""&&(u.id=e.value.id),b.check(u).then(p=>{p.data.exist?m(new Error("手机号已存在")):m()})},trigger:"blur"}]});y(()=>{N.list().then(n=>{k.value=n.data.list}),e.value.id!==""&&L()});function L(){g.value=!0,b.detail(e.value.id).then(n=>{g.value=!1,e.value.account=n.data.account,e.value.name=n.data.name,e.value.mobile=n.data.mobile})}return R({submit(){return new Promise(n=>{e.value.id===""?c.value&&c.value.validate(l=>{l&&b.create(e.value).then(()=>{E.success({message:"模拟新增成功",center:!0}),n()})}):c.value&&c.value.validate(l=>{l&&b.edit(e.value).then(()=>{E.success({message:"模拟编辑成功",center:!0}),n()})})})}}),(n,l)=>{const m=d("ElInput"),u=d("ElFormItem"),p=d("ElRadioButton"),h=d("ElRadioGroup"),w=d("ElOption"),B=d("ElSelect"),F=d("ElForm"),I=C("loading");return S((_(),V("div",null,[o(F,{ref_key:"formRef",ref:c,model:t(e),rules:t(x),"label-width":"120px","label-suffix":"："},{default:r(()=>[o(u,{label:"帐号",prop:"account"},{default:r(()=>[o(m,{modelValue:t(e).account,"onUpdate:modelValue":l[0]||(l[0]=s=>t(e).account=s),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),o(u,{label:"姓名",prop:"name"},{default:r(()=>[o(m,{modelValue:t(e).name,"onUpdate:modelValue":l[1]||(l[1]=s=>t(e).name=s),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),o(u,{label:"手机号",prop:"mobile"},{default:r(()=>[o(m,{modelValue:t(e).mobile,"onUpdate:modelValue":l[2]||(l[2]=s=>t(e).mobile=s),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),o(u,{label:"性别",prop:"sex"},{default:r(()=>[o(h,{modelValue:t(e).sex,"onUpdate:modelValue":l[3]||(l[3]=s=>t(e).sex=s)},{default:r(()=>[o(p,{label:"2"},{default:r(()=>[v(" 保密 ")]),_:1}),o(p,{label:"1"},{default:r(()=>[v(" 男 ")]),_:1}),o(p,{label:"0"},{default:r(()=>[v(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"角色",prop:"role_id"},{default:r(()=>[o(B,{modelValue:t(e).role_id,"onUpdate:modelValue":l[4]||(l[4]=s=>t(e).role_id=s),placeholder:"请选择角色",clearable:""},{default:r(()=>[(_(!0),V(D,null,G(t(k),s=>(_(),M(w,{key:s.id,label:s.role,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[I,t(g)]])}}});export{j as _,b as a};
