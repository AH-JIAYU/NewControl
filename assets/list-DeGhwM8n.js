
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{f as le,I as ne,p as ie,r as L,y as se,h as i,aj as re,o as C,c as ue,a,w as n,b as s,B as g,ak as ce,i as P,k as f,l as pe,L as de,cm as V,ai as z,H as me,e as fe,bG as ve,bE as ge,A as he,_ as _e,d as x}from"./index-qQLkOm5f.js";import{_ as be,a as ye,b as Ce}from"./index.vue_vue_type_style_index_0_lang-CexzgkDe.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-ACM-qd9J.js";import{_ as ke}from"./index.vue_vue_type_script_setup_true_lang-HAzfse51.js";import{a as b}from"./index-CNAeY5je.js";import{u as Ee}from"./usePagination-ByyK1qde.js";import{u as Se}from"./useTabbar-D3pf0tV7.js";import"./vue.runtime.esm-bundler-CAElt4ie.js";import"./country-CHzaIAOf.js";import"./setting_basisDictionary-2IobHlju.js";import"./setting_versionManagement-Bq-mJafT.js";const Me=h=>(ve("data-v-92ada40b"),h=h(),ge(),h),Le=Me(()=>he("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),U=le({name:"SurveyBillManagementList",__name:"list",setup(h){const I=ne(),{pagination:p,onSizeChange:H,onCurrentChange:B,onSortChange:N}=Ee(),$=Se(),w=ie(),k=L([{label:"等级名称",prop:"a",sortable:!0,disableCheck:!1,checked:!0}]),e=L({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],formMode:"drawer",formModeProps:{visible:!1,id:"",row:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});se(()=>{r()});function r(){e.value.loading=!0,b.list({page:1,limit:10}).then(o=>{e.value.loading=!1,e.value.dataList=o.data,p.value.total=Number.parseInt(o.data.total)})}function D(){Object.assign(e.value.search,{title:""}),r()}function A(o){H(o).then(()=>r())}function E(o=1){B(o).then(()=>r())}async function R(){try{const{data:o}=await b.export({page:1,limit:10,id:"",name:"",versionId:""}),l=new Blob([o],{type:"application/octet-stream"}),v=window.URL.createObjectURL(l),u=document.createElement("a");u.href=v,u.download="租户管理.xlsx",u.click(),window.URL.revokeObjectURL(v)}catch(o){console.error("导出失败",o)}}async function T(o){V.confirm(`确认将状态修改成「${o.active===1?"启用":"禁用"}」吗？`,"确认信息").then(async()=>{const{status:l}=await b.edit({id:o.id,active:o.active});l===1&&z.success({message:"修改「状态」成功",center:!0}),r()}).catch(()=>{r()})}function O(){e.value.formModeProps.id="",e.value.formModeProps.visible=!0,e.value.formModeProps.row=JSON.stringify({})}function F(o){e.value.formMode==="router"?w.settings.tabbar.enable&&w.settings.tabbar.mergeTabsBy!=="activeMenu"?$.open({name:"multilevel_menu_examplePermissionsEdit",params:{id:o.id,menulev:o.menuLevel,path:o.path,auths:JSON.stringify(o.auths)}}):I.push({name:"multilevel_menu_examplePermissionsEdit",params:{id:o.id,menulev:o.menuLevel,path:o.path,auths:JSON.stringify(o.auths)}}):(e.value.formModeProps.id=o.id,e.value.formModeProps.row=JSON.stringify(o),e.value.formModeProps.visible=!0)}function j(o){V.confirm(`确认将「${o.name}」的密码重置为 “123456” 吗？`,"确认信息").then(()=>{b.reset({id:o.id}).then(()=>{z.success({message:"重置成功",center:!0}),r()})}).catch(()=>{})}return(o,l)=>{const v=i("ElInput"),u=i("ElFormItem"),J=i("el-select"),S=me,y=i("ElButton"),G=i("ElForm"),Q=we,q=i("ElDivider"),_=i("el-button"),K=be,W=ye,X=Ce,Y=i("el-row"),M=i("el-table-column"),c=i("ElTableColumn"),Z=i("ElSwitch"),ee=i("ElTable"),te=i("ElPagination"),ae=fe,oe=re("loading");return C(),ue("div",{class:de({"absolute-container":e.value.tableAutoHeight})},[a(ae,null,{default:n(()=>[a(Q,{"show-toggle":!1},{default:n(({fold:t,toggle:d})=>[a(G,{model:e.value.search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:n(()=>[a(u,null,{default:n(()=>[a(v,{modelValue:e.value.search.title,"onUpdate:modelValue":l[0]||(l[0]=m=>e.value.search.title=m),placeholder:"租户ID",clearable:""},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(v,{modelValue:e.value.search.title,"onUpdate:modelValue":l[1]||(l[1]=m=>e.value.search.title=m),placeholder:"租户名称",clearable:""},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(J,{modelValue:e.value.search.title,"onUpdate:modelValue":l[2]||(l[2]=m=>e.value.search.title=m),"value-key":"",placeholder:"版本",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(y,{type:"primary",onClick:l[3]||(l[3]=m=>E())},{icon:n(()=>[a(S,{name:"i-ep:search"})]),default:n(()=>[s(" 筛选 ")]),_:1}),a(y,{onClick:D},{icon:n(()=>[Le]),default:n(()=>[s(" 重置 ")]),_:1}),a(y,{disabled:"",link:"",onClick:d},{icon:n(()=>[a(S,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:n(()=>[s(" "+g(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(q,{"border-style":"dashed"}),a(Y,null,{default:n(()=>[a(K,null,{default:n(()=>[a(_,{size:"default",type:"primary",onClick:O},{default:n(()=>[s(" 新增 ")]),_:1})]),_:1}),a(X,null,{default:n(()=>[a(_,{size:"default",onClick:R},{default:n(()=>[s(" 导出 ")]),_:1}),a(W,{border:e.value.border,"onUpdate:border":l[4]||(l[4]=t=>e.value.border=t),tableAutoHeight:e.value.tableAutoHeight,"onUpdate:tableAutoHeight":l[5]||(l[5]=t=>e.value.tableAutoHeight=t),checkList:e.value.checkList,"onUpdate:checkList":l[6]||(l[6]=t=>e.value.checkList=t),columns:k.value,"onUpdate:columns":l[7]||(l[7]=t=>k.value=t),"line-height":e.value.lineHeight,"onUpdate:lineHeight":l[8]||(l[8]=t=>e.value.lineHeight=t),stripe:e.value.stripe,"onUpdate:stripe":l[9]||(l[9]=t=>e.value.stripe=t),style:{"margin-left":"12px"},onQueryData:r},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((C(),P(ee,{border:e.value.border,size:e.value.lineHeight,stripe:e.value.stripe,class:"my-4",data:e.value.dataList,"highlight-current-row":"",height:"100%",onSortChange:f(N),onSelectionChange:l[10]||(l[10]=t=>e.value.batch.selectionDataList=t)},{default:n(()=>[a(M,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"id",width:"80",label:"租户ID"}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"name",label:"租户名称"},{default:n(({row:t})=>[s(g(t.name?t.name:"暂无数据"),1)]),_:1}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"version",label:"版本"}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"countryName",label:"国家"},{default:n(({row:t})=>[s(g(t.countryName?t.countryName:"暂无数据"),1)]),_:1}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"email",label:"邮箱"},{default:n(({row:t})=>[s(g(t.email?t.email:"暂无数据"),1)]),_:1}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"phone",label:"手机号码"},{default:n(({row:t})=>[s(g(t.phone?t.phone:"暂无数据"),1)]),_:1}),a(c,{"show-overflow-tooltip":"",align:"center",prop:"date",label:"期限"}),a(c,{align:"center","show-overflow-tooltip":"",prop:"active",label:"状态"},{default:n(({row:t})=>[a(Z,{modelValue:t.active,"onUpdate:modelValue":d=>t.active=d,"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":2,onChange:d=>T(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(M,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"260"},{default:n(({row:t})=>[a(_,{size:"small",plain:"",type:"primary",onClick:d=>j(t)},{default:n(()=>[s(" 重置密码 ")]),_:2},1032,["onClick"]),a(_,{size:"small",plain:"",type:"primary",onClick:d=>F(t)},{default:n(()=>[s(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","size","stripe","data","onSortChange"])),[[oe,e.value.loading]]),a(te,{"current-page":f(p).page,total:f(p).total,"page-size":f(p).size,"page-sizes":f(p).sizes,layout:f(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e.value.formMode==="dialog"||e.value.formMode==="drawer"?(C(),P(ke,{key:0,id:e.value.formModeProps.id,modelValue:e.value.formModeProps.visible,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.formModeProps.visible=t),row:e.value.formModeProps.row,mode:e.value.formMode,onSuccess:r},null,8,["id","modelValue","row","mode"])):pe("",!0)],2)}}});typeof x=="function"&&x(U);const Ae=_e(U,[["__scopeId","data-v-92ada40b"]]);export{Ae as default};
