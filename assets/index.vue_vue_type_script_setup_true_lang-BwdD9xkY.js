
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as b}from"./setting_questionnaireLibrary-hPtfVbE0.js";import{a as q}from"./setting_basisDictionary-Bc6KM-Yy.js";import{ag as z,r as i,g as x,f as L,m as E,u as $,y as J,h as s,o as v,c as w,a as l,w as n,b as k,k as a,$ as O,a0 as T,ai as C,i as j}from"./index-CNoZ28XD.js";const A=z("tenantMenu",()=>{const u=i([]),m=x(async()=>{if(u.value.length)return u.value;const{data:r}=await q.itemList(32);return r});return{country:u,getCountry:m}}),G=A,Q=L({__name:"index",props:E(["id","row"],{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:E(["success"],["update:modelValue"]),setup(u,{emit:m}){const r=u,g=m,I=G(),p=$(u,"modelValue"),_=i([]),c=i(),t=i({categoryName:"",countryId:null,status:2}),N=i({categoryName:[{required:!0,message:"请输入问卷名称",trigger:"blur"}],countryId:[{required:!0,message:"请选择国家",trigger:"blur"}]});J(async()=>{_.value=await I.getCountry});const S=x(()=>(t.value={},r.id&&(t.value=JSON.parse(r.row)),r.id===""?"新增":"编辑"));async function B(){r.id?c.value&&c.value.validate(async d=>{if(d){const{status:e}=await b.edit(t.value);e===1&&C.success({message:"编辑成功",center:!0}),f(),g("success")}}):c.value&&c.value.validate(async d=>{if(d){const{status:e}=await b.create(t.value);e===1&&C.success({message:"新增成功",center:!0}),f(),g("success")}})}function f(){p.value=!1}return(d,e)=>{const M=s("ElInput"),y=s("ElFormItem"),F=s("el-option"),h=s("el-select"),U=s("ElSwitch"),D=s("ElForm"),V=s("ElButton"),R=s("ElDialog");return v(),w("div",null,[l(R,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),title:a(S),width:"50%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:n(()=>[l(V,{size:"large",onClick:f},{default:n(()=>[k(" 取消 ")]),_:1}),l(V,{type:"primary",size:"large",onClick:B},{default:n(()=>[k(" 确定 ")]),_:1})]),default:n(()=>[l(D,{ref_key:"formRef",ref:c,model:a(t),rules:a(N),"label-width":"120px","label-suffix":"："},{default:n(()=>[l(y,{label:"名称",prop:"categoryName"},{default:n(()=>[l(M,{modelValue:a(t).categoryName,"onUpdate:modelValue":e[0]||(e[0]=o=>a(t).categoryName=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(y,{label:"国家",prop:"countryId"},{default:n(()=>[l(h,{modelValue:a(t).countryId,"onUpdate:modelValue":e[1]||(e[1]=o=>a(t).countryId=o),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:n(()=>[(v(!0),w(O,null,T(a(_),o=>(v(),j(F,{key:o.id,label:o.chineseName,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(y,{label:"状态"},{default:n(()=>[l(U,{modelValue:a(t).status,"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).status=o),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"开启","inactive-text":"禁用",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Q as _};
