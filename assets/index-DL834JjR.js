
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ah as b,ag as R,r as c,g as J,f as L,y as z,ai as h,h as i,aj as A,ak as G,k as e,o as s,c as k,a as t,w as n,b as N,$ as E,a0 as q,i as m,l as g,_ as H}from"./index-vWDRJyOK.js";import{u as K}from"./country-DbI8Kqug.js";import{a as Q}from"./setting_versionManagement-CXUszLjW.js";const F={list:r=>b.post("tenant-control/get/getTenant",r),create:r=>b.post("tenant-control/insert/insertTenant",r),edit:r=>b.post("tenant-control/update/updateTenantStatus",r),export:r=>b.post("tenant-control/export/exportTenantList",r),reset:r=>b.post("tenant-user/update/resetPassword",r)},W=R("version",()=>{const r=c([]),T=J(async()=>{if(r.value.length)return r.value;const{data:v}=await Q.list();return v});return{versionMenu:r,getVersion:T}}),X=W,I="创建完成后，请告知用户初始密码：123456",Y=L({__name:"index",props:["id","row"],setup(r,{expose:T}){const v=r,D=K(),M=X(),p=c(!1),y=c(),l=c({id:v.id,name:"",country:"",phone:"",email:"",version:"",active:1,registerType:"phone",companyType:"1"}),f=JSON.parse(v.row),C=c([]),S=c([]),O=c({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],registerType:[{required:!0,message:"请选择注册方式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],companyType:[{required:!0,message:"请选择账户类型",trigger:"blur"}]});z(async()=>{p.value=!0,C.value=await D.getCountry,S.value=await M.getVersion,v.id&&(l.value=JSON.parse(v.row)),p.value=!1});function $(){l.value.registerType=l.value.country==="CN"?"phone":"email"}return T({submit(){return new Promise(w=>{if(l.value.id==="")y.value&&y.value.validate(o=>{o&&(p.value=!0,F.create(l.value).then(()=>{p.value=!1,h.success({message:"新增成功",center:!0}),w()}))});else{const{active:o,phone:V,email:x,id:u}=l.value,d={active:o,phone:V,email:x,id:u};y.value&&y.value.validate(_=>{_&&(p.value=!0,F.edit(d).then(()=>{p.value=!1,h.success({message:"编辑成功",center:!0}),w()}))})}})}}),(w,o)=>{const V=i("el-radio"),x=i("el-radio-group"),u=i("ElFormItem"),d=i("ElInput"),_=i("el-option"),U=i("el-select"),j=i("el-switch"),B=i("ElForm"),P=A("loading");return G((s(),k("div",null,[t(B,{ref_key:"formRef",ref:y,model:e(l),rules:e(O),"label-width":"120px","label-suffix":"："},{default:n(()=>[t(u,{label:"账户类型",prop:"companyType"},{default:n(()=>[t(x,{modelValue:e(l).companyType,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).companyType=a),class:"ml-4"},{default:n(()=>[t(V,{value:"1"},{default:n(()=>[N(" 个人 ")]),_:1}),t(V,{value:"2"},{default:n(()=>[N(" 公司 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"用户名",prop:"name"},{default:n(()=>[t(d,{modelValue:e(l).name,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).name=a),disabled:e(f).id,placeholder:"请输入用户名"},null,8,["modelValue","disabled"])]),_:1}),t(u,{label:"国家",prop:"country"},{default:n(()=>[t(U,{modelValue:e(l).country,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).country=a),disabled:e(f).id,"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:n(()=>[(s(!0),k(E,null,q(e(C).records,a=>(s(),m(_,{key:a.id,label:a.chineseName,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(l).companyType==="2"?(s(),m(u,{key:0,label:"公司名称",prop:"name"},{default:n(()=>[t(d,{modelValue:e(l).name,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).name=a),disabled:e(f).id,placeholder:"请输入公司名称"},null,8,["modelValue","disabled"])]),_:1})):g("",!0),e(l).companyType==="2"?(s(),m(u,{key:1,label:"公司税号",prop:"name"},{default:n(()=>[t(d,{modelValue:e(l).name,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).name=a),disabled:e(f).id,placeholder:"请输入公司税号"},null,8,["modelValue","disabled"])]),_:1})):g("",!0),e(l).companyType==="2"?(s(),m(u,{key:2,label:"法人姓名",prop:"name"},{default:n(()=>[t(d,{modelValue:e(l).name,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).name=a),disabled:e(f).id,placeholder:"请输入法人姓名"},null,8,["modelValue","disabled"])]),_:1})):g("",!0),e(l).country==="CN"?(s(),m(u,{key:3,label:"手机号码",prop:"phone"},{default:n(()=>[t(d,{modelValue:e(l).phone,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).phone=a),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})):g("",!0),e(l).country!=="CN"?(s(),m(u,{key:4,label:"电子邮箱",prop:"email"},{default:n(()=>[t(d,{modelValue:e(l).email,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})):g("",!0),t(u,{label:"初始密码",prop:"password"},{default:n(()=>[t(d,{modelValue:I,"onUpdate:modelValue":o[8]||(o[8]=a=>I=a),disabled:"",placeholder:"请输入登录密码"})]),_:1}),t(u,{label:"版本分配",prop:"version"},{default:n(()=>[t(U,{modelValue:e(l).version,"onUpdate:modelValue":o[9]||(o[9]=a=>e(l).version=a),disabled:e(f).id,placeholder:"请选择版本",onChange:$},{default:n(()=>[(s(!0),k(E,null,q(e(S),a=>(s(),m(_,{key:a.id,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),t(u,{label:"租户状态",prop:"active"},{default:n(()=>[t(j,{modelValue:e(l).active,"onUpdate:modelValue":o[10]||(o[10]=a=>e(l).active=a),"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[P,e(p)]])}}}),Z=H(Y,[["__scopeId","data-v-0c1acb8e"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as D,F as a,oe as i,X as u};
