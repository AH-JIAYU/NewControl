
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Ee}from"./index-Bf0X8MaX.js";import{f as Ue,r as i,y as Se,ak as $,h as m,ai as Be,o as n,c as V,aj as L,a as t,w as l,i as o,$ as M,a0 as N,l as r,b as s,A as c,au as P,aZ as Le,av as q,c9 as T,a1 as K,ap as Me,H as Ne,bG as Oe,bE as Re,B as O,_ as $e,d as oe}from"./index-CnUI3URZ.js";import{_ as Te}from"./index-BvOq1fxJ.js";import{u as De,a as de}from"./supplieMenu-BwcImr0t.js";const _=h=>(Oe("data-v-c9ac591f"),h=h(),Re(),h),Fe={class:"absolute-container"},je={class:"page-main"},ze={style:{float:"left"}},Ae={style:{float:"right","font-size":"13px",color:"var(--el-text-color-secondary)"}},Pe=_(()=>c("span",{class:"label-tip"},"即 name ，系统唯一",-1)),qe={class:"label-tip"},Ke={class:"flex gap-2"},We=_(()=>c("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)),He={class:"label-tip"},Ge={class:"label-tip"},Je=_(()=>c("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1)),Ze=_(()=>c("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)),Qe=_(()=>c("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)),Xe=_(()=>c("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)),Ye=_(()=>c("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)),el=_(()=>c("span",{class:"label-tip"},"请设置有效的长度单位，例如：px/em/rem等",-1)),pe=Ue({name:"PagesExampleMenuDetail",__name:"index",props:["id","parentId","row","menuLevel"],setup(h,{expose:se}){const R=h,re=De(),b=i(!1),C=i(),D=i(!1),g=i(),k=i([]),ie=i([{value:1,label:"一级导航"},{value:2,label:"二级导航"},{value:3,label:"三级导航"},{value:4,label:"内置页面"}]),w=i(""),F=i(!1),e=i({id:R.id??"",parentId:R.parentId??"",path:"",redirect:"",name:"",component:"",sort:"",menuLevel:R.menuLevel??"",navigation:"",key:[],meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,alwaysOpened:!1,permanent:!1,menu:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",newWindow:!1,link:"",iframe:"",copyright:!1,paddingBottom:"0px"}}),W=i();function me(v){e.value.key.splice(e.value.key.indexOf(v),1)}function ve(){F.value=!0,K(()=>{W.value.input.focus()})}function H(){w.value&&(e.value.key=e.value.key||[],e.value.key.push(w.value)),F.value=!1,w.value=""}const ce=i({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});function E(v,u){const U=[];function S(B){if(Array.isArray(B))for(const d of B)d.menuLevel===u&&U.push(d),Array.isArray(d.children)&&S(d.children)}return S(v),U}function fe(v){v===1?k.value=E(g.value,1):v===2?k.value=E(g.value,2):v===3?k.value=E(g.value,3):k.value=E(g.value,4)}Se(async()=>{g.value=await re.getsupplieMenu,k.value=E(g.value,e.value.menuLevel),D.value=!e.value.id&&!e.value.parentId,e.value.id!==""&&_e()});function _e(){b.value=!0,e.value.id&&(e.value=JSON.parse(R.row),b.value=!1)}const x=i(""),j=i(!1),G=i();function be(v){typeof e.value.meta.cache=="object"&&e.value.meta.cache.splice(e.value.meta.cache.indexOf(v),1)}function ye(){j.value=!0,K(()=>{G.value.input.focus()})}function J(){x.value&&typeof e.value.meta.cache=="object"&&(e.value.meta.cache.includes(x.value)?$.warning("规则已存在"):e.value.meta.cache.push(x.value)),j.value=!1,x.value=""}const I=i(""),z=i(!1),Z=i();function Ve(v){e.value.meta.noCache.splice(e.value.meta.noCache.indexOf(v),1)}function ge(){z.value=!0,K(()=>{Z.value.input.focus()})}function Q(){I.value&&(e.value.meta.noCache.includes(I.value)?$.warning("规则已存在"):e.value.meta.noCache.push(I.value)),z.value=!1,I.value=""}return se({submit(){return new Promise(v=>{e.value.id===""?C.value&&C.value.validate(u=>{u&&(e.value.menuLevel=Number(e.value.menuLevel)+1,b.value=!0,de.create(e.value).then(()=>{b.value=!1,$.success({message:"新增成功",center:!0}),v()}))}):C.value&&C.value.validate(u=>{u&&(b.value=!0,de.edit(e.value).then(()=>{b.value=!1,$.success({message:"编辑成功",center:!0}),v()}))})})}}),(v,u)=>{const U=Me,S=m("el-option"),B=m("el-select"),d=m("ElFormItem"),p=m("ElCol"),f=m("ElInput"),A=m("ElLink"),X=m("ElRow"),ke=m("el-tag"),xe=m("el-input"),Ie=m("el-button"),Y=Te,y=m("ElSwitch"),ee=Ne,le=m("ElTooltip"),ae=m("ElTag"),te=m("ElButton"),ue=m("ElSpace"),he=Ee,Ce=m("ElForm"),we=Be("loading");return n(),V("div",Fe,[L((n(),V("div",je,[t(Ce,{ref_key:"formRef",ref:C,model:e.value,rules:ce.value,"label-position":"top"},{default:l(()=>[t(he,{"right-side-width":"500px","hide-right-side-toggle":"",style:{"padding-bottom":"100px"}},{default:l(()=>[t(U,{title:"基础配置",content:"标准路由配置，包含 path/redirect/name/component"}),t(X,{gutter:30,style:{padding:"20px"}},{default:l(()=>[e.value.parentId||D.value?(n(),o(p,{key:0,xl:12,lg:24},{default:l(()=>[t(d,{label:"路由等级"},{default:l(()=>[t(B,{modelValue:e.value.menuLevel,"onUpdate:modelValue":u[0]||(u[0]=a=>e.value.menuLevel=a),clear:"","value-key":"",placeholder:"",clearable:"",filterable:"",onChange:fe},{default:l(()=>[(n(!0),V(M,null,N(ie.value,a=>(n(),o(S,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId||D.value?(n(),o(p,{key:1,xl:12,lg:24},{default:l(()=>[t(d,{label:"父级导航"},{default:l(()=>[t(B,{modelValue:e.value.parentId,"onUpdate:modelValue":u[1]||(u[1]=a=>e.value.parentId=a),clear:"","value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(n(!0),V(M,null,N(k.value,a=>(n(),o(S,{key:a.id,label:a.meta.title,value:a.id},{default:l(()=>[c("span",ze,O(a.meta.title),1),c("span",Ae,O(a.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):r("",!0),t(p,{xl:12,lg:24},{default:l(()=>[t(d,{label:"排序",prop:"redirect"},{default:l(()=>[t(f,{modelValue:e.value.sort,"onUpdate:modelValue":u[2]||(u[2]=a=>e.value.sort=a),clearable:"",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1}),e.value.parentId?(n(),o(p,{key:2,xl:12,lg:24},{default:l(()=>[t(d,{label:"路由地址",prop:"path"},{default:l(()=>[t(f,{modelValue:e.value.path,"onUpdate:modelValue":u[3]||(u[3]=a=>e.value.path=a),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:3,xl:12,lg:24},{default:l(()=>[t(d,{label:"重定向",prop:"redirect"},{default:l(()=>[t(f,{modelValue:e.value.redirect,"onUpdate:modelValue":u[4]||(u[4]=a=>e.value.redirect=a),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:4,xl:12,lg:24},{default:l(()=>[t(d,{prop:"name"},{label:l(()=>[s(" 路由命名 "),Pe]),default:l(()=>[t(f,{modelValue:e.value.name,"onUpdate:modelValue":u[5]||(u[5]=a=>e.value.name=a),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:5,xl:12,lg:24},{default:l(()=>[t(d,{prop:"component"},{label:l(()=>[s(" 组件路径 "),c("span",qe,[s(" 顶级路由请设置“"),t(A,{type:"primary",underline:!1,onClick:u[6]||(u[6]=P(a=>e.value.component="Layout",["prevent"]))},{default:l(()=>[s("Layout ")]),_:1}),s("”，中间层级路由无需设置 ")])]),default:l(()=>[t(f,{modelValue:e.value.component,"onUpdate:modelValue":u[7]||(u[7]=a=>e.value.component=a),clearable:"",placeholder:"请输入完整组件路径"},Le({_:2},[e.value.component!=="Layout"?{name:"prepend",fn:l(()=>[s(" /src/views/ ")]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})):r("",!0)]),_:1}),t(U,{title:"扩展配置"}),t(X,{gutter:30,style:{padding:"20px"}},{default:l(()=>[t(p,{xl:12,lg:24},{default:l(()=>[t(d,{label:"显示名称",prop:"meta.title"},{default:l(()=>[t(f,{modelValue:e.value.meta.title,"onUpdate:modelValue":u[8]||(u[8]=a=>e.value.meta.title=a),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xl:12,lg:24},{default:l(()=>[t(d,{label:"模块接口"},{default:l(()=>[c("div",Ke,[(n(!0),V(M,null,N(e.value.key,a=>(n(),o(ke,{key:a,closable:"","disable-transitions":!1,onClose:ne=>me(a)},{default:l(()=>[s(O(a),1)]),_:2},1032,["onClose"]))),128)),F.value?(n(),o(xe,{key:0,ref_key:"InputRef",ref:W,modelValue:w.value,"onUpdate:modelValue":u[9]||(u[9]=a=>w.value=a),class:"w-20",size:"small",onKeyup:q(H,["enter"]),onBlur:H},null,8,["modelValue"])):(n(),o(Ie,{key:1,class:"button-new-tag",size:"small",onClick:ve},{default:l(()=>[s(" + 添加 ")]),_:1}))])]),_:1})]),_:1}),t(p,{xl:12,lg:24},{default:l(()=>[t(d,{label:"默认图标",prop:"meta.icon"},{default:l(()=>[t(Y,{modelValue:e.value.meta.icon,"onUpdate:modelValue":u[10]||(u[10]=a=>e.value.meta.icon=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xl:12,lg:24},{default:l(()=>[t(d,{label:"激活图标",prop:"meta.activeIcon"},{default:l(()=>[t(Y,{modelValue:e.value.meta.activeIcon,"onUpdate:modelValue":u[11]||(u[11]=a=>e.value.meta.activeIcon=a)},null,8,["modelValue"])]),_:1})]),_:1}),e.value.parentId?(n(),o(p,{key:0,xl:12,lg:24},{default:l(()=>[t(d,{label:"默认展开",prop:"meta.defaultOpened"},{default:l(()=>[t(y,{modelValue:e.value.meta.defaultOpened,"onUpdate:modelValue":u[12]||(u[12]=a=>e.value.meta.defaultOpened=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:1,xl:12,lg:24},{default:l(()=>[t(d,{label:"始终展开",prop:"meta.alwaysOpened"},{default:l(()=>[t(y,{modelValue:e.value.meta.alwaysOpened,"onUpdate:modelValue":u[13]||(u[13]=a=>e.value.meta.alwaysOpened=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:2,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.permanent"},{label:l(()=>[s(" 常驻标签页 "),We]),default:l(()=>[t(y,{modelValue:e.value.meta.permanent,"onUpdate:modelValue":u[14]||(u[14]=a=>e.value.meta.permanent=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:3,xl:12,lg:24},{default:l(()=>[t(d,{label:"在导航显示",prop:"meta.menu"},{default:l(()=>[t(y,{modelValue:e.value.meta.menu,"onUpdate:modelValue":u[15]||(u[15]=a=>e.value.meta.menu=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:4,xl:12,lg:24},{default:l(()=>[t(d,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:l(()=>[t(y,{modelValue:e.value.meta.breadcrumb,"onUpdate:modelValue":u[16]||(u[16]=a=>e.value.meta.breadcrumb=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:5,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.cache"},{label:l(()=>[s(" 缓存规则 "),t(le,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:l(()=>[t(ee,{name:"i-ri:question-line"})]),_:1}),L(c("span",He,[s("切换为"),t(A,{type:"primary",underline:!1,onClick:u[17]||(u[17]=P(a=>e.value.meta.cache=!0,["prevent"]))},{default:l(()=>[s("始终缓存")]),_:1})],512),[[T,typeof e.value.meta.cache=="object"]]),L(c("span",Ge,[s("切换为"),t(A,{type:"primary",underline:!1,onClick:u[18]||(u[18]=P(a=>e.value.meta.cache=[],["prevent"]))},{default:l(()=>[s("规则模式")]),_:1})],512),[[T,typeof e.value.meta.cache=="boolean"]])]),default:l(()=>[L(t(ue,null,{default:l(()=>[(n(!0),V(M,null,N(e.value.meta.cache,a=>(n(),o(ae,{key:a,size:"large",closable:"","disable-transitions":!1,onClose:ne=>be(a)},{default:l(()=>[s(O(a),1)]),_:2},1032,["onClose"]))),128)),j.value?(n(),o(f,{key:0,ref_key:"InputCacheRef",ref:G,modelValue:x.value,"onUpdate:modelValue":u[19]||(u[19]=a=>x.value=a),style:{width:"200px"},onKeyup:q(J,["enter"]),onBlur:J},null,8,["modelValue"])):(n(),o(te,{key:1,onClick:ye},{default:l(()=>[s(" 新增 ")]),_:1}))]),_:1},512),[[T,typeof e.value.meta.cache=="object"]]),L(c("div",null," 始终缓存 ",512),[[T,typeof e.value.meta.cache=="boolean"]])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:6,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.noCache"},{label:l(()=>[s(" 不缓存规则 "),t(le,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:l(()=>[t(ee,{name:"i-ri:question-line"})]),_:1}),Je]),default:l(()=>[t(ue,null,{default:l(()=>[(n(!0),V(M,null,N(e.value.meta.noCache,a=>(n(),o(ae,{key:a,size:"large",closable:"","disable-transitions":!1,onClose:ne=>Ve(a)},{default:l(()=>[s(O(a),1)]),_:2},1032,["onClose"]))),128)),z.value?(n(),o(f,{key:0,ref_key:"InputNoCacheRef",ref:Z,modelValue:I.value,"onUpdate:modelValue":u[20]||(u[20]=a=>I.value=a),style:{width:"200px"},onKeyup:q(Q,["enter"]),onBlur:Q},null,8,["modelValue"])):(n(),o(te,{key:1,onClick:ge},{default:l(()=>[s(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:7,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.activeMenu"},{label:l(()=>[s(" 高亮导航 "),Ze]),default:l(()=>[t(f,{modelValue:e.value.meta.activeMenu,"onUpdate:modelValue":u[21]||(u[21]=a=>e.value.meta.activeMenu=a),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:8,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.badge"},{label:l(()=>[s(" 徽标 "),Qe]),default:l(()=>[t(f,{modelValue:e.value.meta.badge,"onUpdate:modelValue":u[22]||(u[22]=a=>e.value.meta.badge=a),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:9,xl:12,lg:24},{default:l(()=>[t(d,{label:"新窗口打开",prop:"meta.newWindow"},{default:l(()=>[t(y,{modelValue:e.value.meta.newWindow,"onUpdate:modelValue":u[23]||(u[23]=a=>e.value.meta.newWindow=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:10,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.link"},{label:l(()=>[s(" 访问外链 "),Xe]),default:l(()=>[t(f,{modelValue:e.value.meta.link,"onUpdate:modelValue":u[24]||(u[24]=a=>e.value.meta.link=a),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:11,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.iframe"},{label:l(()=>[s(" 内嵌网页 "),Ye]),default:l(()=>[t(f,{modelValue:e.value.meta.iframe,"onUpdate:modelValue":u[25]||(u[25]=a=>e.value.meta.iframe=a),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:12,xl:12,lg:24},{default:l(()=>[t(d,{label:"底部版权",prop:"meta.copyright"},{default:l(()=>[t(y,{modelValue:e.value.meta.copyright,"onUpdate:modelValue":u[26]||(u[26]=a=>e.value.meta.copyright=a),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0),e.value.parentId?(n(),o(p,{key:13,xl:12,lg:24},{default:l(()=>[t(d,{prop:"meta.paddingBottom"},{label:l(()=>[s(" 底部填充高度 "),el]),default:l(()=>[t(f,{modelValue:e.value.meta.paddingBottom,"onUpdate:modelValue":u[27]||(u[27]=a=>e.value.meta.paddingBottom=a),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1})):r("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[we,b.value]])])}}});typeof oe=="function"&&oe(pe);const nl=$e(pe,[["__scopeId","data-v-c9ac591f"]]);export{nl as default};
