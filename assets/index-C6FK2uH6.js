
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as F}from"./setting_user-CU9eINVB.js";import{a as I}from"./setting_role-NBaMMRim.js";import{ae as N,r as n,c as U,d as z,m as V,u as j,t as q,a as r,ai as L,o as i,b as w,aj as P,i as o,e as E,w as l,f as u,g as k,Y as T,Z as Y,cn as Z,ak as $,I as A}from"./index-DSVb7hii.js";const G=N("buttonPermission",()=>{const t=n([]),d=U(async()=>{if(t.value.length)return t.value;const{data:c}=await I.list();return c});return{role:t,getRole:d}}),H=G,J="分配角色",K=z({__name:"index",props:V(["id","row"],{modelValue:{default:!1},modelModifiers:{}}),emits:V(["success"],["update:modelValue"]),setup(t,{emit:d}){const c=t,x=d,y=H(),m=n(!1),f=n(),a=n({id:c.row.id,role:"",account:""}),R=n({role:[{required:!0,message:"请选择角色码",trigger:"blur"}]}),v=n(),p=j(t,"modelValue");a.value.account=c.row.account;function C(){a.value.id&&f.value&&f.value.validate(g=>{g&&F.setUserRole(a.value).then(s=>{$.success({message:s.status===1?"角色赋予成功":"接口异常",center:!0}),x("success"),_()})})}q(async()=>{m.value=!0,v.value=await y.getRole,m.value=!1});function _(){p.value=!1}return(g,s)=>{const B=r("el-option"),M=r("el-select"),S=r("ElFormItem"),b=r("ElButton"),h=r("ElDialog"),D=L("loading");return i(),w("div",null,[P((i(),E(h,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),title:J,width:"30%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:l(()=>[u(b,{size:"large",onClick:_},{default:l(()=>[k(" 取消 ")]),_:1}),u(b,{type:"primary",size:"large",onClick:C},{default:l(()=>[k(" 确定 ")]),_:1})]),default:l(()=>[u(o(Z),{ref_key:"formRef",ref:f,inline:!0,rules:o(R),model:o(a),"label-width":"120px","label-suffix":":"},{default:l(()=>[u(S,{label:"角色",prop:"role"},{default:l(()=>[u(M,{modelValue:o(a).role,"onUpdate:modelValue":s[0]||(s[0]=e=>o(a).role=e),placeholder:"请选择角色"},{default:l(()=>[(i(!0),w(T,null,Y(o(v),e=>(i(),E(B,{key:e.id,label:e.roleName,value:e.roleName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])),[[D,o(m)]])])}}}),X=A(K,[["__scopeId","data-v-f6432adb"]]);export{X as default};
