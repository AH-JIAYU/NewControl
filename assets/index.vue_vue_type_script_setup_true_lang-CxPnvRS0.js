
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as b}from"./setting_questionnaireLibrary-DGowpeiq.js";import{u as z}from"./country-UCFpeutj.js";import{f as j,m as E,r as c,u as J,y as L,g as O,h as n,ai as T,aj as $,k as a,o as v,c as w,a as o,w as s,b as k,$ as A,a0 as G,ak as x,i as H}from"./index-JmadfgZC.js";const W=j({__name:"index",props:E(["id","row"],{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:E(["success"],["update:modelValue"]),setup(y,{emit:I}){const i=y,_=I,N=z(),u=c(!1),m=J(y,"modelValue"),g=c([]),r=c(),l=c({categoryName:"",countryId:null,status:2}),C=c({categoryName:[{required:!0,message:"请输入问卷名称",trigger:"blur"}],countryId:[{required:!0,message:"请选择国家",trigger:"blur"}]});L(async()=>{u.value=!0,g.value=await N.getCountry,u.value=!1});const B=O(()=>(l.value={},i.id&&(l.value=JSON.parse(i.row)),i.id===""?"新增":"编辑"));async function S(){i.id?r.value&&r.value.validate(async d=>{if(d){u.value=!0;const{status:e}=await b.edit(l.value);e===1&&x.success({message:"编辑成功",center:!0}),u.value=!1,p(),_("success")}}):r.value&&r.value.validate(async d=>{if(d){u.value=!0;const{status:e}=await b.create(l.value);e===1&&x.success({message:"新增成功",center:!0}),u.value=!1,p(),_("success")}})}function p(){m.value=!1}return(d,e)=>{const F=n("ElInput"),f=n("ElFormItem"),M=n("el-option"),h=n("el-select"),D=n("ElSwitch"),U=n("ElForm"),V=n("ElButton"),R=n("ElDialog"),q=T("loading");return $((v(),w("div",null,[o(R,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),title:a(B),width:"50%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:s(()=>[o(V,{size:"large",onClick:p},{default:s(()=>[k(" 取消 ")]),_:1}),o(V,{type:"primary",size:"large",onClick:S},{default:s(()=>[k(" 确定 ")]),_:1})]),default:s(()=>[o(U,{ref_key:"formRef",ref:r,model:a(l),rules:a(C),"label-width":"120px","label-suffix":"："},{default:s(()=>[o(f,{label:"名称",prop:"categoryName"},{default:s(()=>[o(F,{modelValue:a(l).categoryName,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).categoryName=t),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(f,{label:"国家",prop:"countryId"},{default:s(()=>[o(h,{modelValue:a(l).countryId,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).countryId=t),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:s(()=>[(v(!0),w(A,null,G(a(g),t=>(v(),H(M,{key:t.id,label:t.chineseName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"状态"},{default:s(()=>[o(D,{modelValue:a(l).status,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).status=t),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"开启","inactive-text":"禁用",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[q,a(u)]])}}});export{W as _};
