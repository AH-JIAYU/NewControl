
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import F from"./index-Cm04YYmE.js";import{a as I}from"./tenant_tenantPermission-DnVTp1ty.js";import{d as $,n as q,r as u,t as M,R as j,a as s,ai as J,aj as O,i as l,o as _,b as S,f as e,w as a,e as h,g as i,j as U,cm as z,ak as K,I as P}from"./index-DCJyWkOf.js";import"./tenantMenu-BkBdxn2T.js";import"./tenant_tenantMenu-q459pXqT.js";const Y=$({__name:"index",props:["id","auths","menulev"],setup(v){const d=v,E=q("success"),b=u({menu:[{required:!0,message:"请选择路由地址",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],name:[{required:!0,message:"请输入key标识",trigger:"blur"}],label:[{required:!0,message:"请输入名称",trigger:"blur"}]}),m=u(!1),k=u(),w=u(),t=u({visible:!1,id:"",path:"",keys:[],row:{}}),n=u({id:d.id,menulev:d.menulev,title:"",flat:!1,menu:"",data:[],menuData:[],choiceMenuData:[]});M(async()=>{n.value.id!==""&&x()}),j(()=>d.auths,o=>{n.value.data=JSON.parse(o)},{deep:!0});function x(){m.value=!0,n.value.data=JSON.parse(d.auths),n.value.flat=!!n.value.data.length,m.value=!1}function C(o){t.value.id=o.id,t.value.row=JSON.stringify(o),t.value.visible=!0}function V(o){z.confirm(`确认删除「${o.label}」吗？`,"确认信息").then(()=>{m.value=!0,I.delete(o.id).then(()=>{K.success({message:"删除成功",center:!0}),E(),m.value=!1})}).catch(()=>{})}return(o,g)=>{const p=s("el-radio-button"),T=s("el-radio-group"),B=s("ElFormItem"),c=s("ElTableColumn"),y=s("ElButton"),D=s("ElTable"),N=s("ElForm"),R=J("loading");return O((_(),S("div",null,[e(N,{ref_key:"formRef",ref:k,rules:l(b),model:l(n),"label-width":"120px","label-suffix":"："},{default:a(()=>[(_(),h(D,{ref_key:"authsTableRef",ref:w,key:v.id,data:l(n).data,stripe:"","highlight-current-row":"",border:""},{default:a(()=>[e(c,{label:"类型",align:"center",prop:"type"},{default:a(r=>[e(B,{prop:`data.${r.$index}.type`,rules:l(b).type},{default:a(()=>[e(T,{modelValue:r.row.type,"onUpdate:modelValue":f=>r.row.type=f,disabled:""},{default:a(()=>[e(p,{value:"get",label:"get"},{default:a(()=>[i(" 读 ")]),_:1}),e(p,{value:"insert",label:"insert"},{default:a(()=>[i(" 写 ")]),_:1}),e(p,{value:"update",label:"update"},{default:a(()=>[i(" 改 ")]),_:1}),e(p,{value:"delete",label:"delete"},{default:a(()=>[i(" 删 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(c,{label:"权限KEY",prop:"name"}),e(c,{label:"对应接口",prop:"key"}),e(c,{label:"名称",prop:"label"}),e(c,{label:"名称"},{default:a(r=>[e(y,{type:"primary",size:"small",plain:"",onClick:f=>C(r.row)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),e(y,{type:"danger",size:"small",plain:"",onClick:f=>V(r.row)},{default:a(()=>[i(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1},8,["rules","model"]),l(t).visible?(_(),h(F,{key:0,id:l(t).id,modelValue:l(t).visible,"onUpdate:modelValue":g[0]||(g[0]=r=>l(t).visible=r),menulev:d.menulev,row:l(t).row},null,8,["id","modelValue","menulev","row"])):U("",!0)])),[[R,l(m)]])}}}),W=P(Y,[["__scopeId","data-v-27b5f8a8"]]);export{W as default};
