
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{f as D,J as R,A as V,r as $,q as z,G as b,s as A,h as d,ap as N,o as u,c as G,a as o,w as n,b as f,ai as H,k as t,i as p,l as v,M as I,aG as U,ao as q,y as J,e as j,_ as F}from"./index-DR6yxu20.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-DEQdMehy.js";import{a as h}from"./setting_role-5zZdImod.js";import{u as O}from"./usePagination-DpWMpSet.js";import{u as Q}from"./useTabbar-M6tPutko.js";import"./index-DsSNTXZv.js";import"./setting_permissions-XKKZqIzY.js";const W=D({name:"SettingRoleList",__name:"list",setup(X){const _=R(),{pagination:M,getParams:Y,onSizeChange:Z,onCurrentChange:ee,onSortChange:C}=O(),g=Q(),r=V(),e=$({loading:!1,tableAutoHeight:!1,formMode:"drawer",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});z(()=>{i(),e.value.formMode==="router"&&b.on("get-data-list",()=>{console.log(99),i()})}),A(()=>{e.value.formMode==="router"&&b.off("get-data-list")});function i(){e.value.loading=!0,h.list().then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,M.value.total=a.data.total})}function E({prop:a,order:l}){C(a,l).then(()=>i())}function x(){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleCreate"}):_.push({name:"multilevel_menu_exampleRoleCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function y(a){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):_.push({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):(e.value.formModeProps.id=a.id,e.value.formModeProps.visible=!0)}function S(a){U.confirm(`确认删除「${a.title}」吗？`,"确认信息").then(()=>{h.delete(a.id).then(()=>{i(),q.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}return(a,l)=>{const k=J,c=d("ElButton"),P=d("ElSpace"),m=d("ElTableColumn"),B=d("ElTable"),T=j,w=N("loading");return u(),G("div",{class:I({"absolute-container":t(e).tableAutoHeight})},[o(T,null,{default:n(()=>[o(P,{wrap:""},{default:n(()=>[o(c,{type:"primary",size:"default",onClick:x},{icon:n(()=>[o(k,{name:"i-ep:plus"})]),default:n(()=>[f(" 新增角色管理 ")]),_:1})]),_:1}),H((u(),p(B,{class:"my-4",data:t(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:l[0]||(l[0]=s=>t(e).batch.selectionDataList=s)},{default:n(()=>[t(e).batch.enable?(u(),p(m,{key:0,type:"selection",align:"center",fixed:""})):v("",!0),o(m,{prop:"id",label:"id"}),o(m,{prop:"role",label:"角色码"}),o(m,{label:"操作",width:"250",align:"center",fixed:"right"},{default:n(s=>[o(c,{type:"primary",size:"small",plain:"",onClick:L=>y(s.row)},{default:n(()=>[f(" 编辑 ")]),_:2},1032,["onClick"]),o(c,{type:"danger",size:"small",plain:"",onClick:L=>S(s.row)},{default:n(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,t(e).loading]])]),_:1}),t(e).formMode==="dialog"||t(e).formMode==="drawer"?(u(),p(K,{key:0,id:t(e).formModeProps.id,modelValue:t(e).formModeProps.visible,"onUpdate:modelValue":l[1]||(l[1]=s=>t(e).formModeProps.visible=s),mode:t(e).formMode,onSuccess:i},null,8,["id","modelValue","mode"])):v("",!0)],2)}}}),re=F(W,[["__scopeId","data-v-ba897048"]]);export{re as default};
