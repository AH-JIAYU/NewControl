
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as j,a as I}from"./version-92yGihjm.js";import{u as J}from"./country-D3v4NDxL.js";import{d as M,r as c,t as O,ak as h,a as i,ai as L,aj as Y,i as e,o as s,b as k,f as t,w as n,g as Z,Y as E,Z as q,e as m,j as y,I as z}from"./index-NBWyYRod.js";import"./setting_versionManagement-rFBtBIBl.js";import"./setting_basisDictionary-DmrEOpc3.js";const D="创建完成后，请告知用户初始密码：123456",A=M({__name:"index",props:["id","row"],setup(F,{expose:S}){const b=F,P=J(),B=j(),d=c(!1),v=c(),l=c({id:b.id,name:"",password:"123456",country:"",companyName:"",taxID:"",legalPersonName:"",phone:"",email:"",version:"",active:1,registerType:"phone",type:"company"}),p=JSON.parse(b.row),C=c([]),U=c([]),R=c({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],type:[{required:!0,message:"请选择账户类型",trigger:"blur"}]});O(async()=>{d.value=!0,C.value=await P.getCountry,U.value=await B.getVersion,b.id&&(l.value=JSON.parse(b.row)),l.value.type="company",d.value=!1});function T(){l.value.registerType=l.value.country==="CN"?"phone":"email"}return S({submit(){return new Promise(w=>{if(l.value.id==="")v.value&&v.value.validate(o=>{o&&(d.value=!0,delete l.value.id,I.create(l.value).then(f=>{const{status:r,error:u}=f;h({type:r===1?"success":"warning",message:r===1?"新增成功":u,center:!0}),d.value=!1,w()}))});else{const{active:o,phone:f,email:r,id:u}=l.value,g={active:o,phone:f,email:r,id:u};v.value&&v.value.validate(V=>{V&&(d.value=!0,I.edit(g).then(N=>{const{status:_,error:x}=N;h({type:_===1?"success":"warning",message:_===1?"编辑成功":x,center:!0}),d.value=!1,w()}))})}})}}),(w,o)=>{const f=i("el-text"),r=i("ElFormItem"),u=i("ElInput"),g=i("el-option"),V=i("el-select"),N=i("el-switch"),_=i("ElForm"),x=L("loading");return Y((s(),k("div",null,[t(_,{ref_key:"formRef",ref:v,model:e(l),rules:e(R),"label-width":"120px","label-suffix":"："},{default:n(()=>[t(r,{label:"账户类型",prop:""},{default:n(()=>[t(f,null,{default:n(()=>[Z("公司")]),_:1})]),_:1}),t(r,{label:"用户名",prop:"name"},{default:n(()=>[t(u,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),disabled:e(p).id,placeholder:"请输入用户名"},null,8,["modelValue","disabled"])]),_:1}),t(r,{label:"国家",prop:"country"},{default:n(()=>[t(V,{modelValue:e(l).country,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).country=a),disabled:e(p).id,"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:n(()=>[(s(!0),k(E,null,q(e(C),a=>(s(),m(g,{key:a.id,label:a.chineseName,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(l).type==="company"?(s(),m(r,{key:0,label:"公司名称",prop:"companyName"},{default:n(()=>[t(u,{modelValue:e(l).companyName,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).companyName=a),disabled:e(p).id,placeholder:"请输入公司名称"},null,8,["modelValue","disabled"])]),_:1})):y("",!0),e(l).type==="company"?(s(),m(r,{key:1,label:"公司税号"},{default:n(()=>[t(u,{modelValue:e(l).taxID,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).taxID=a),disabled:e(p).id,placeholder:"请输入公司税号"},null,8,["modelValue","disabled"])]),_:1})):y("",!0),e(l).type==="company"?(s(),m(r,{key:2,label:"法人姓名"},{default:n(()=>[t(u,{modelValue:e(l).legalPersonName,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).legalPersonName=a),disabled:e(p).id,placeholder:"请输入法人姓名"},null,8,["modelValue","disabled"])]),_:1})):y("",!0),e(l).country==="CN"?(s(),m(r,{key:3,label:"手机号码",prop:"phone"},{default:n(()=>[t(u,{modelValue:e(l).phone,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).phone=a),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})):y("",!0),e(l).country!=="CN"?(s(),m(r,{key:4,label:"电子邮箱",prop:"email"},{default:n(()=>[t(u,{modelValue:e(l).email,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})):y("",!0),t(r,{label:"初始密码",prop:"password"},{default:n(()=>[t(u,{modelValue:D,"onUpdate:modelValue":o[7]||(o[7]=a=>D=a),disabled:"",placeholder:"请输入登录密码"})]),_:1}),t(r,{label:"版本分配",prop:"version"},{default:n(()=>[t(V,{modelValue:e(l).version,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).version=a),disabled:e(p).id,placeholder:"请选择版本",onChange:T},{default:n(()=>[(s(!0),k(E,null,q(e(U),a=>(s(),m(g,{key:a.id,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),t(r,{label:"租户状态",prop:"active"},{default:n(()=>[t(N,{modelValue:e(l).active,"onUpdate:modelValue":o[9]||(o[9]=a=>e(l).active=a),"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":2,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[x,e(d)]])}}}),X=z(A,[["__scopeId","data-v-c9de4211"]]);export{X as default};
