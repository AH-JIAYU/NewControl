
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as E}from"./setting_questionnaireLibrary-C-j3d-oK.js";import{u as h}from"./country-Dujd5uAk.js";import{d as j,m as w,r as i,u as J,t as L,c as O,a as n,ai as T,aj as Y,i as a,o as v,b as C,f as o,w as s,g as x,Y as Z,Z as A,ak as k,e as G}from"./index-CcnRRDsH.js";const Q=j({__name:"index",props:w(["id","row"],{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:w(["success"],["update:modelValue"]),setup(y,{emit:B}){const c=y,g=B,I=h(),u=i(!1),p=J(y,"modelValue"),_=i([]),r=i(),l=i({categoryName:"",countryId:null,status:2}),N=i({categoryName:[{required:!0,message:"请输入问卷名称",trigger:"blur"}],countryId:[{required:!0,message:"请选择国家",trigger:"blur"}]});L(async()=>{u.value=!0,_.value=await I.getCountry,u.value=!1});const S=O(()=>(l.value={},c.id&&(l.value=JSON.parse(c.row)),c.id===""?"新增":"编辑"));async function F(){c.id?r.value&&r.value.validate(async d=>{if(d){u.value=!0;const{status:e}=await E.edit(l.value);e===1&&k.success({message:"编辑成功",center:!0}),u.value=!1,f(),g("success")}}):r.value&&r.value.validate(async d=>{if(d){u.value=!0;const{status:e}=await E.create(l.value);e===1&&k.success({message:"新增成功",center:!0}),u.value=!1,f(),g("success")}})}function f(){p.value=!1}return(d,e)=>{const M=n("ElInput"),m=n("ElFormItem"),U=n("el-option"),D=n("el-select"),V=n("ElSwitch"),R=n("ElForm"),b=n("ElButton"),q=n("ElDialog"),z=T("loading");return Y((v(),C("div",null,[o(q,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),title:a(S),width:"50%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:s(()=>[o(b,{size:"large",onClick:f},{default:s(()=>[x(" 取消 ")]),_:1}),o(b,{type:"primary",size:"large",onClick:F},{default:s(()=>[x(" 确定 ")]),_:1})]),default:s(()=>[o(R,{ref_key:"formRef",ref:r,model:a(l),rules:a(N),"label-width":"120px","label-suffix":"："},{default:s(()=>[o(m,{label:"名称",prop:"categoryName"},{default:s(()=>[o(M,{modelValue:a(l).categoryName,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).categoryName=t),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(m,{label:"国家",prop:"countryId"},{default:s(()=>[o(D,{modelValue:a(l).countryId,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).countryId=t),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:s(()=>[(v(!0),C(Z,null,A(a(_),t=>(v(),G(U,{key:t.id,label:t.chineseName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"状态"},{default:s(()=>[o(V,{modelValue:a(l).status,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).status=t),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"开启","inactive-text":"禁用",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1}),o(m,{label:"B2C"},{default:s(()=>[o(V,{modelValue:a(l).problemCategory,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).problemCategory=t),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"B2C","inactive-text":"B2B"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[z,a(u)]])}}});export{Q as _};
