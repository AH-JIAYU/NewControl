
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as v}from"./setting_user-DS-uiCN3.js";import{f as k,r as p,y as q,ai as _,h as m,aj as B,ak as C,k as l,o as x,c as F,a,w as s,i as I,l as y,b as w}from"./index-vWDRJyOK.js";const G=k({__name:"index",props:["id","row"],setup(E,{expose:N}){const V=E,P=p(!1),n=p(),e=p({id:"",account:"",name:"",password:"",confirmPassword:"",phoneNumber:null,sex:2}),R=p({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(i,o,t)=>{o!==e.value.password?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"}]});q(()=>{V.id&&(e.value=JSON.parse(V.row))}),N({submit(){return new Promise(i=>{e.value.id===""?n.value&&n.value.validate(o=>{o&&v.create(e.value).then(()=>{_.success({message:"新增成功",center:!0}),c(),i()})}):n.value&&n.value.validate(o=>{if(o){const{id:t,account:u,password:d,confirmPassword:f,name:b,sex:g,phoneNumber:r,active:U}=e.value,h={id:t,account:u,password:d,confirmPassword:f,name:b,sex:g,phoneNumber:r,active:U};v.edit(h).then(()=>{_.success({message:"编辑成功",center:!0}),c(),i()})}})})},onCancel:c});function c(){e.value={}}return(i,o)=>{const t=m("ElInput"),u=m("ElFormItem"),d=m("ElRadioButton"),f=m("ElRadioGroup"),b=m("ElForm"),g=B("loading");return C((x(),F("div",null,[a(b,{ref_key:"formRef",ref:n,model:l(e),rules:l(R),"label-width":"130px","label-suffix":"："},{default:s(()=>[a(u,{label:"帐号",prop:"account"},{default:s(()=>[a(t,{modelValue:l(e).account,"onUpdate:modelValue":o[0]||(o[0]=r=>l(e).account=r),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),a(u,{label:"密码",prop:"password"},{default:s(()=>[a(t,{modelValue:l(e).password,"onUpdate:modelValue":o[1]||(o[1]=r=>l(e).password=r),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),l(e).id?(x(),I(u,{key:0,label:"确认修改密码",prop:"confirmPassword"},{default:s(()=>[a(t,{modelValue:l(e).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=r=>l(e).confirmPassword=r),placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1})):y("",!0),a(u,{label:"姓名",prop:"name"},{default:s(()=>[a(t,{modelValue:l(e).name,"onUpdate:modelValue":o[3]||(o[3]=r=>l(e).name=r),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(u,{label:"手机号",prop:"phoneNumber"},{default:s(()=>[a(t,{modelValue:l(e).phoneNumber,"onUpdate:modelValue":o[4]||(o[4]=r=>l(e).phoneNumber=r),modelModifiers:{number:!0},placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(u,{label:"性别",prop:"sex"},{default:s(()=>[a(f,{modelValue:l(e).sex,"onUpdate:modelValue":o[5]||(o[5]=r=>l(e).sex=r)},{default:s(()=>[a(d,{label:2},{default:s(()=>[w(" 保密 ")]),_:1}),a(d,{label:1},{default:s(()=>[w(" 男 ")]),_:1}),a(d,{label:0},{default:s(()=>[w(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[g,l(P)]])}}});export{G as _};
