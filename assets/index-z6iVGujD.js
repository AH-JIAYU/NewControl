
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as b}from"./setting_basisDictionary-DhVcE2af.js";import{g as F,m as E,u as U,h as I,r as g,q,i as m,o as R,j as S,w as n,a as s,b as y,l as o,E as C,_ as T}from"./index-C3PJOLdt.js";const z=F({__name:"index",props:E({parentId:{default:""},id:{default:""},tree:{},row:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:E(["addNode","editNode"],["update:modelValue"]),setup(N,{emit:k}){const d=N,_=k,h=U(N,"modelValue"),x=I(()=>d.id===""?"新增字典":"编辑字典");function v(t,l,r=!1){const u=[];return t&&t.forEach(f=>{const a={...f};a.id===l||r?(a.disabled=!0,a.children&&(a.children=v(a.children,l,!0))):(a.disabled=!1,a.children&&(a.children=v(a.children,l,r))),u.push(a)}),u}const w=I(()=>v(d.tree,d.id)),c=g(),e=g({catalogueId:d.parentId,id:d.id,englishName:"",chineseName:"",remark:""}),B=g({chineseName:[{required:!0,message:"请输入字典名称"}],englishName:[{required:!0,message:"请输入字典编码"}]});q(()=>{if(d.id!==""){const{id:t,englishName:l,chineseName:r}=JSON.parse(d.row);e.value.id=t,e.value.chineseName=r,e.value.englishName=l}});function M(){e.value.id===""?c.value&&c.value.validate(t=>{t&&b.create(e.value).then(()=>{C.success({message:"新增成功",center:!0}),_("addNode",{id:e.value.id,label:e.value.chineseName,code:e.value.englishName}),p()})}):c.value&&c.value.validate(t=>{t&&b.edit(e.value).then(()=>{C.success({message:"编辑成功",center:!0}),_("editNode",{id:e.value.id,label:e.value.chineseName,code:e.value.englishName},e.value.catalogueId),p()})})}function p(){h.value=!1}return(t,l)=>{const r=m("ElCascader"),u=m("ElFormItem"),f=m("ElInput"),a=m("ElForm"),V=m("ElButton"),D=m("ElDialog");return R(),S(D,{modelValue:h.value,"onUpdate:modelValue":l[3]||(l[3]=i=>h.value=i),title:o(x),width:"400px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:p},{footer:n(()=>[s(V,{size:"large",onClick:p},{default:n(()=>[y(" 取消 ")]),_:1}),s(V,{type:"primary",size:"large",onClick:M},{default:n(()=>[y(" 确定 ")]),_:1})]),default:n(()=>[s(a,{ref_key:"formRef",ref:c,model:o(e),rules:o(B),"label-width":"80px"},{default:n(()=>[s(u,{label:"父级字典",prop:"parentId"},{default:n(()=>[s(r,{modelValue:o(e).catalogueId,"onUpdate:modelValue":l[0]||(l[0]=i=>o(e).catalogueId=i),options:o(w),props:{value:"id",label:"name",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择父级字典，默认为根字典",clearable:""},null,8,["modelValue","options"])]),_:1}),s(u,{label:"字典名称",prop:"chineseName"},{default:n(()=>[s(f,{modelValue:o(e).chineseName,"onUpdate:modelValue":l[1]||(l[1]=i=>o(e).chineseName=i),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1}),s(u,{label:"字典编码",prop:"englishName"},{default:n(()=>[s(f,{modelValue:o(e).englishName,"onUpdate:modelValue":l[2]||(l[2]=i=>o(e).englishName=i),placeholder:"请输入字典编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),O=T(z,[["__scopeId","data-v-d160af40"]]);export{O as default};
