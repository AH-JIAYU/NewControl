
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as b}from"./setting_user-C1k-9py8.js";import{f as k,r as i,y as P,ai as V,h as d,aj as h,ak as q,k as o,o as w,c as B,a,w as t,i as C,l as F,b as c}from"./index-CGs043Wj.js";const M=k({__name:"index",props:["id","row"],setup(_,{expose:v}){const g=_,x=i(!1),n=i(),e=i({id:"",account:"",name:"",password:"",confirmPassword:"",phoneNumber:null,sex:2}),E=i({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(m,l,u)=>{l!==e.value.password?u(new Error("两次输入的密码不一致")):u()},trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"}]});P(()=>{g.id&&(e.value=JSON.parse(g.row))}),v({submit(){return new Promise(m=>{e.value.id===""?n.value&&n.value.validate(l=>{l&&b.create(e.value).then(()=>{V.success({message:"新增成功",center:!0}),p(),m()})}):n.value&&n.value.validate(l=>{l&&b.edit(e.value).then(()=>{V.success({message:"编辑成功",center:!0}),p(),m()})})})},onCancel:p});function p(){e.value={}}return(m,l)=>{const u=d("ElInput"),s=d("ElFormItem"),f=d("ElRadioButton"),N=d("ElRadioGroup"),R=d("ElForm"),U=h("loading");return q((w(),B("div",null,[a(R,{ref_key:"formRef",ref:n,model:o(e),rules:o(E),"label-width":"130px","label-suffix":"："},{default:t(()=>[a(s,{label:"帐号",prop:"account"},{default:t(()=>[a(u,{modelValue:o(e).account,"onUpdate:modelValue":l[0]||(l[0]=r=>o(e).account=r),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),a(s,{label:"密码",prop:"password"},{default:t(()=>[a(u,{modelValue:o(e).password,"onUpdate:modelValue":l[1]||(l[1]=r=>o(e).password=r),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),o(e).id?(w(),C(s,{key:0,label:"确认修改密码",prop:"confirmPassword"},{default:t(()=>[a(u,{modelValue:o(e).confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=r=>o(e).confirmPassword=r),placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1})):F("",!0),a(s,{label:"姓名",prop:"name"},{default:t(()=>[a(u,{modelValue:o(e).name,"onUpdate:modelValue":l[3]||(l[3]=r=>o(e).name=r),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"手机号",prop:"phoneNumber"},{default:t(()=>[a(u,{modelValue:o(e).phoneNumber,"onUpdate:modelValue":l[4]||(l[4]=r=>o(e).phoneNumber=r),modelModifiers:{number:!0},placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(s,{label:"性别",prop:"sex"},{default:t(()=>[a(N,{modelValue:o(e).sex,"onUpdate:modelValue":l[5]||(l[5]=r=>o(e).sex=r)},{default:t(()=>[a(f,{label:2},{default:t(()=>[c(" 保密 ")]),_:1}),a(f,{label:1},{default:t(()=>[c(" 男 ")]),_:1}),a(f,{label:0},{default:t(()=>[c(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[U,o(x)]])}}});export{M as _};
