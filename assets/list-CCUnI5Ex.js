
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as V,N as L,x as $,r as N,q as R,D as b,I as z,i as d,s as I,o as u,c as A,a as o,w as n,b as f,t as H,l as a,j as p,n as v,Q as U,cm as j,E as q,M as J,e as O,_ as Q}from"./index-zX-UbP25.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-Qs02LhKu.js";import{a as M}from"./index-JWOCwNhS.js";import{u as G}from"./usePagination-DxUxEec2.js";import{u as K}from"./useTabbar-BxJ-ZlRa.js";import"./tenantMenu-D1ik0fKX.js";import"./tenant_tenantMenu-BzR_nRH9.js";import"./tenantButtonPermission-DRuEzbYa.js";import"./tenant_tenantPermission-gCG1WQCS.js";const W=V({name:"VersionVersionManagementList",__name:"list",setup(X){const _=L(),{pagination:h,onSortChange:C}=G(),g=K(),r=$(),e=N({loading:!1,tableAutoHeight:!1,formMode:"drawer",formModeProps:{visible:!1,id:"",row:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});R(()=>{i(),e.value.formMode==="router"&&b.on("get-data-list",()=>{i()})}),z(()=>{e.value.formMode==="router"&&b.off("get-data-list")});function i(){e.value.loading=!0,M.list().then(t=>{e.value.loading=!1,e.value.dataList=t.data,h.value.total=t.data.length})}function E({prop:t,order:s}){C(t,s).then(()=>i())}function x(){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleCreate"}):_.push({name:"multilevel_menu_exampleRoleCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function w(t){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleEdit",params:{id:t.id}}):_.push({name:"multilevel_menu_exampleRoleEdit",params:{id:t.id}}):(e.value.formModeProps.id=t.id,e.value.formModeProps.row=JSON.stringify(t),e.value.formModeProps.visible=!0)}function y(t){j.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(()=>{M.delete(t.id).then(()=>{i(),q.success({message:"删除成功",center:!0})})}).catch(()=>{})}return(t,s)=>{const P=J,c=d("ElButton"),S=d("ElSpace"),m=d("ElTableColumn"),k=d("ElTable"),B=O,D=I("loading");return u(),A("div",{class:U({"absolute-container":a(e).tableAutoHeight})},[o(B,null,{default:n(()=>[o(S,{wrap:""},{default:n(()=>[o(c,{type:"primary",size:"default",onClick:x},{icon:n(()=>[o(P,{name:"i-ep:plus"})]),default:n(()=>[f(" 新增版本管理 ")]),_:1})]),_:1}),H((u(),p(k,{class:"my-4",data:a(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:s[0]||(s[0]=l=>a(e).batch.selectionDataList=l)},{default:n(()=>[a(e).batch.enable?(u(),p(m,{key:0,type:"selection",align:"center",fixed:""})):v("",!0),o(m,{prop:"id",width:"300",label:"ID"}),o(m,{prop:"name",label:"版本"}),o(m,{label:"操作",width:"250",align:"center",fixed:"right"},{default:n(l=>[o(c,{type:"primary",size:"small",plain:"",onClick:T=>w(l.row)},{default:n(()=>[f(" 编辑 ")]),_:2},1032,["onClick"]),o(c,{type:"danger",size:"small",plain:"",onClick:T=>y(l.row)},{default:n(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,a(e).loading]])]),_:1}),a(e).formMode==="dialog"||a(e).formMode==="drawer"?(u(),p(F,{key:0,id:a(e).formModeProps.id,modelValue:a(e).formModeProps.visible,"onUpdate:modelValue":s[1]||(s[1]=l=>a(e).formModeProps.visible=l),row:a(e).formModeProps.row,mode:a(e).formMode,onSuccess:i},null,8,["id","modelValue","row","mode"])):v("",!0)],2)}}}),ie=Q(W,[["__scopeId","data-v-9cf78526"]]);export{ie as default};
