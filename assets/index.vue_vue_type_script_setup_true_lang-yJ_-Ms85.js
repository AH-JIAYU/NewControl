
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as c}from"./setting_user-o8IhCpp7.js";import{f as R,r as p,y as U,ai as v,h as i,aj as P,ak as q,k as o,o as V,c as B,a as r,w as u,i as C,l as y,b as g}from"./index-_6B1mbBs.js";const M=R({__name:"index",props:["id","row"],setup(w,{expose:_}){const b=w,x=p(!1),n=p(),e=p({id:"",account:"",name:"",password:"",confirmPassword:"",phoneNumber:null,sex:2}),E=p({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(d,l,a)=>{l!==e.value.password?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(d,l,a)=>{const s={key:"phoneNumber",value:l};e.value.id!==""&&(s.id=e.value.id),c.check(s).then(m=>{m.data.exist?a(new Error("手机号已存在")):a()})},trigger:"blur"}]});U(()=>{b.id&&(e.value=JSON.parse(b.row))}),_({submit(){return new Promise(d=>{e.value.id===""?n.value&&n.value.validate(l=>{l&&c.create(e.value).then(()=>{v.success({message:"新增成功",center:!0}),f(),d()})}):n.value&&n.value.validate(l=>{l&&c.edit(e.value).then(()=>{v.success({message:"编辑成功",center:!0}),f(),d()})})})},onCancel:f});function f(){e.value={}}return(d,l)=>{const a=i("ElInput"),s=i("ElFormItem"),m=i("ElRadioButton"),N=i("ElRadioGroup"),h=i("ElForm"),k=P("loading");return q((V(),B("div",null,[r(h,{ref_key:"formRef",ref:n,model:o(e),rules:o(E),"label-width":"130px","label-suffix":"："},{default:u(()=>[r(s,{label:"帐号",prop:"account"},{default:u(()=>[r(a,{modelValue:o(e).account,"onUpdate:modelValue":l[0]||(l[0]=t=>o(e).account=t),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),r(s,{label:"密码",prop:"password"},{default:u(()=>[r(a,{modelValue:o(e).password,"onUpdate:modelValue":l[1]||(l[1]=t=>o(e).password=t),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),o(e).id?(V(),C(s,{key:0,label:"确认修改密码",prop:"confirmPassword"},{default:u(()=>[r(a,{modelValue:o(e).confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).confirmPassword=t),placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1})):y("",!0),r(s,{label:"姓名",prop:"name"},{default:u(()=>[r(a,{modelValue:o(e).name,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),r(s,{label:"手机号",prop:"phoneNumber"},{default:u(()=>[r(a,{modelValue:o(e).phoneNumber,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).phoneNumber=t),modelModifiers:{number:!0},placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),r(s,{label:"性别",prop:"sex"},{default:u(()=>[r(N,{modelValue:o(e).sex,"onUpdate:modelValue":l[5]||(l[5]=t=>o(e).sex=t)},{default:u(()=>[r(m,{label:2},{default:u(()=>[g(" 保密 ")]),_:1}),r(m,{label:1},{default:u(()=>[g(" 男 ")]),_:1}),r(m,{label:0},{default:u(()=>[g(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[k,o(x)]])}}});export{M as _};
