
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as L,J as V,s as $,r as R,A as z,B as b,E as N,i as d,ap as A,o as u,c as I,a as o,w as n,b as c,ai as H,l as t,j as f,n as v,C as J,M as U,aF as j,ao as F,I as O,e as q,_ as G}from"./index-C4wi2QcV.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-D_6-OE6S.js";import{a as M}from"./index-zqlM8Phc.js";import{u as Q}from"./usePagination-BivSTixP.js";import{u as W}from"./useTabbar-_a_NTmrY.js";import"./buttonPermission-mJNlyucR.js";import"./setting_permissions-DamOsxL9.js";const X=L({name:"SettingVersionManagementList",__name:"list",setup(Y){const g=V(),{pagination:h,onSortChange:C}=Q(),_=W(),r=$(),e=R({loading:!1,tableAutoHeight:!1,formMode:"drawer",formModeProps:{visible:!1,id:"",row:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});z(()=>{i(),e.value.formMode==="router"&&b.on("get-data-list",()=>{i()})}),N(()=>{e.value.formMode==="router"&&b.off("get-data-list")});function i(){e.value.loading=!0,M.list().then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,console.log("res",a),h.value.total=a.data.length})}function E({prop:a,order:s}){C(a,s).then(()=>i())}function w(){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?_.open({name:"multilevel_menu_exampleRoleCreate"}):g.push({name:"multilevel_menu_exampleRoleCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function y(a){e.value.formMode==="router"?r.settings.tabbar.enable&&r.settings.tabbar.mergeTabsBy!=="activeMenu"?_.open({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):g.push({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):(e.value.formModeProps.id=a.id,e.value.formModeProps.row=JSON.stringify(a),e.value.formModeProps.visible=!0)}function P(a){j.confirm(`确认删除「${a.title}」吗？`,"确认信息").then(()=>{M.delete(a.id).then(()=>{i(),F.success({message:"删除成功",center:!0})})}).catch(()=>{})}return(a,s)=>{const S=O,p=d("ElButton"),x=d("ElSpace"),m=d("ElTableColumn"),B=d("ElTable"),k=q,T=A("loading");return u(),I("div",{class:U({"absolute-container":t(e).tableAutoHeight})},[o(k,null,{default:n(()=>[o(x,{wrap:""},{default:n(()=>[o(p,{type:"primary",size:"default",onClick:w},{icon:n(()=>[o(S,{name:"i-ep:plus"})]),default:n(()=>[c(" 新增角色管理 ")]),_:1})]),_:1}),H((u(),f(B,{class:"my-4",data:t(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:s[0]||(s[0]=l=>t(e).batch.selectionDataList=l)},{default:n(()=>[t(e).batch.enable?(u(),f(m,{key:0,type:"selection",align:"center",fixed:""})):v("",!0),o(m,{prop:"id",label:"id"}),o(m,{prop:"name",label:"角色码"}),o(m,{label:"操作",width:"250",align:"center",fixed:"right"},{default:n(l=>[o(p,{type:"primary",size:"small",plain:"",onClick:D=>y(l.row)},{default:n(()=>[c(" 编辑 ")]),_:2},1032,["onClick"]),o(p,{type:"danger",size:"small",plain:"",onClick:D=>P(l.row)},{default:n(()=>[c(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,t(e).loading]])]),_:1}),c(" "+J(`row${t(e).formModeProps.row}`)+" ",1),t(e).formMode==="dialog"||t(e).formMode==="drawer"?(u(),f(K,{key:0,id:t(e).formModeProps.id,modelValue:t(e).formModeProps.visible,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).formModeProps.visible=l),row:t(e).formModeProps.row,mode:t(e).formMode,onSuccess:i},null,8,["id","modelValue","row","mode"])):v("",!0)],2)}}}),le=G(X,[["__scopeId","data-v-5019e854"]]);export{le as default};
