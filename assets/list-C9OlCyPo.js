
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as O}from"./index-Ct_vpw-a.js";import{ah as g,f as Q,r as h,y as W,X as T,h as l,ai as Y,o as m,c as Z,A as d,a as t,w as o,aj as f,i as w,B as v,c9 as k,b as ee,k as p,H as te,bG as ae,bE as ne,_ as oe,d as z}from"./index-B9guF8Px.js";import{u as ie}from"./usePagination-D2OZXXHs.js";const B={list:()=>g.get("/tenant/dict/getTenantDict"),getTenantCatalogueDictionary:i=>g.get(`/tenant/dict/getTenantDictByDictId/${i}`),getTenantDataDictionary:i=>g.get(`/tenant/dict/getTenantDictDataSource/${i}`),getDataDictionaryId:i=>g.get(`/tenant/dict/getTenantDictDataSourceByDataSourceId/${i}`)},le=i=>(ae("data-v-8d75d91f"),i=i(),ne(),i),se={class:"absolute-container"},ce={class:"page-main"},re={class:"custom-tree-node"},de=["title"],ue={class:"code"},pe={class:"dictionary-container"},_e={class:"dictionary-container"},ge=le(()=>d("div",{class:"empty"}," 请在左侧新增或选择一个字典 ",-1)),he=[ge],L=Q({name:"tenant_dictionary",__name:"list",setup(i){const y=h(),r=h({search:"",tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),{pagination:s,onSizeChange:N,onCurrentChange:V,onSortChange:x}=ie();s.value.size=20,s.value.sizes=[20,50,100];const R=h(),a=h({loading:!1,search:{dictionaryId:"",title:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:""}});function b(){r.value.loading=!0,a.value.search.dictionaryId="",B.list().then(e=>{r.value.tree=e.data,r.value.loading=!1})}W(()=>{b()}),T(()=>r.value.search,e=>{y.value.filter(e)});function $(e,n){return e?n.label.includes(e):!0}function G(e){s.value.page=1,a.value.search.dictionaryId=e.id}T(()=>a.value.search.dictionaryId,()=>{u()});function u(){a.value.loading=!0,B.getTenantDataDictionary(a.value.search.dictionaryId).then(e=>{a.value.loading=!1,a.value.dataList=e.data,a.value.dataList.forEach(n=>{n.enableLoading=!1}),s.value.total=e.data.length})}function P(e){N(e).then(()=>u())}function U(e=1){V(e).then(()=>u())}function j({prop:e,order:n}){x(e,n).then(()=>u())}return(e,n)=>{const D=te,C=l("ElButton"),A=l("ElButtonGroup"),E=l("ElInput"),F=l("ElTree"),H=l("ElScrollbar"),M=l("ElSpace"),_=l("ElTableColumn"),X=l("ElTag"),q=l("ElTable"),J=l("ElPagination"),K=O,I=Y("loading");return m(),Z("div",se,[d("div",ce,[t(K,{"hide-left-side-toggle":""},{leftSide:o(()=>[t(A,{class:"btns"},{default:o(()=>[t(C,{class:"add",onClick:b},{icon:o(()=>[t(D,{name:"i-ep:refresh"})]),_:1})]),_:1}),t(E,{modelValue:r.value.search,"onUpdate:modelValue":n[0]||(n[0]=c=>r.value.search=c),placeholder:"请输入关键词筛选字典",clearable:"",class:"search"},null,8,["modelValue"]),t(H,{class:"tree"},{default:o(()=>[f((m(),w(F,{ref_key:"dictionaryRef",ref:y,data:r.value.tree,"filter-node-method":$,"default-expand-all":"",onNodeClick:G},{default:o(({node:c,data:S})=>[d("div",re,[d("div",{class:"label",title:c.label},v(S.chineseName),9,de),d("div",ue,v(S.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[I,r.value.loading]])]),_:1})]),default:o(()=>[f(d("div",pe,[t(M,{wrap:""},{default:o(()=>[t(E,{modelValue:a.value.search.title,"onUpdate:modelValue":n[1]||(n[1]=c=>a.value.search.title=c),placeholder:"请输入关键词筛选字典项",clearable:"",style:{width:"200px"}},null,8,["modelValue"]),t(C,{onClick:u},{icon:o(()=>[t(D,{name:"i-ep:search"})]),_:1})]),_:1}),f((m(),w(q,{ref_key:"dictionaryItemRef",ref:R,data:a.value.dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:j,onSelectionChange:n[2]||(n[2]=c=>a.value.selectionDataList=c)},{default:o(()=>[t(_,{type:"selection",align:"center",fixed:""}),t(_,{prop:"chineseName",label:"中文名称"}),t(_,{prop:"englishName",label:"英文名称"}),t(_,{label:"键值",align:"center",width:"150"},{default:o(c=>[t(X,{type:"info"},{default:o(()=>[ee(v(c.row.id),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[I,a.value.loading]]),t(J,{"current-page":p(s).page,total:p(s).total,"page-size":p(s).size,"page-sizes":p(s).sizes,layout:p(s).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:P,onCurrentChange:U},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[k,a.value.search.dictionaryId]]),f(d("div",_e,he,512),[[k,!a.value.search.dictionaryId]])]),_:1})])])}}});typeof z=="function"&&z(L);const ye=oe(L,[["__scopeId","data-v-8d75d91f"]]);export{ye as default};
