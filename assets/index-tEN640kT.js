
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ah as m,ag as M,r as i,g as $,f as j,y as B,ai as P,h as d,aj as R,ak as q,k as t,o as u,c as V,a as n,w as r,$ as h,a0 as S,i as v,l as E,_ as L}from"./index-_6B1mbBs.js";import{u as O}from"./country-DUES5NA9.js";import{a as z}from"./setting_versionManagement-qRgtRkHu.js";const A={list:a=>m.post("tenant-control/get/getTenant",a),create:a=>m.post("tenant-control/insert/insertTenant",a),edit:a=>m.post("tenant-control/update/updateTenantStatus",a),export:a=>m.post("tenant-control/export/exportTenantList",a),reset:a=>m.post("tenant-user/update/resetPassword",a)},G=M("version",()=>{const a=i([]),f=$(async()=>{if(a.value.length)return a.value;const{data:_}=await z.list();return _});return{versionMenu:a,getVersion:f}}),H=G,N="创建完成后，请告知用户初始密码：123456",J=j({__name:"index",props:{id:{default:""}},setup(a,{expose:f}){const _=a,T=O(),U=H(),b=i(!1),p=i(),l=i({id:_.id,name:"",country:"",phoneNumber:"",email:"",version:"",active:1,registerType:"phone"}),g=i([]),y=i([]),C=i({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}]});return B(async()=>{b.value=!0,g.value=await T.getCountry,y.value=await U.getVersion,b.value=!1,console.log("version.value ",g.value)}),f({submit(){return new Promise(x=>{l.value.id===""?p.value&&p.value.validate(o=>{l.value.registerType=l.value.country==="343"?"phone":"email",console.log("form.value",l.value)}):p.value&&p.value.validate(o=>{o&&A.edit(l.value).then(()=>{P.success({message:"模拟编辑成功",center:!0}),x()})})})}}),(x,o)=>{const c=d("ElInput"),s=d("ElFormItem"),w=d("el-option"),k=d("el-select"),F=d("el-switch"),I=d("ElForm"),D=R("loading");return q((u(),V("div",null,[n(I,{ref_key:"formRef",ref:p,model:t(l),rules:t(C),"label-width":"120px","label-suffix":"："},{default:r(()=>[n(s,{label:"用户名",prop:"name"},{default:r(()=>[n(c,{modelValue:t(l).name,"onUpdate:modelValue":o[0]||(o[0]=e=>t(l).name=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),n(s,{label:"国家",prop:"country"},{default:r(()=>[n(k,{modelValue:t(l).country,"onUpdate:modelValue":o[1]||(o[1]=e=>t(l).country=e),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:r(()=>[(u(!0),V(h,null,S(t(g).records,e=>(u(),v(w,{key:e.id,label:e.chineseName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(l).country==="343"?(u(),v(s,{key:0,label:"手机号码",prop:"phoneNumber"},{default:r(()=>[n(c,{modelValue:t(l).phoneNumber,"onUpdate:modelValue":o[2]||(o[2]=e=>t(l).phoneNumber=e),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})):E("",!0),t(l).country!=="343"?(u(),v(s,{key:1,label:"电子邮箱",prop:"email"},{default:r(()=>[n(c,{modelValue:t(l).email,"onUpdate:modelValue":o[3]||(o[3]=e=>t(l).email=e),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})):E("",!0),n(s,{label:"初始密码",prop:"password"},{default:r(()=>[n(c,{modelValue:N,"onUpdate:modelValue":o[4]||(o[4]=e=>N=e),disabled:"",placeholder:"请输入登录密码"})]),_:1}),n(s,{label:"版本分配",prop:"role"},{default:r(()=>[n(k,{modelValue:t(l).version,"onUpdate:modelValue":o[5]||(o[5]=e=>t(l).version=e),placeholder:"请选择版本"},{default:r(()=>[(u(!0),V(h,null,S(t(y),e=>(u(),v(w,{key:e.id,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(s,{label:"租户状态",prop:"active"},{default:r(()=>[n(F,{modelValue:t(l).active,"onUpdate:modelValue":o[6]||(o[6]=e=>t(l).active=e),"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,t(b)]])}}}),K=L(J,[["__scopeId","data-v-4557a03f"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as D,A as a,Y as i};
