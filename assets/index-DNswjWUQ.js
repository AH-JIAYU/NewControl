
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ah as V,ag as R,r as c,g as J,f as L,y as z,ak as E,h as i,ai as A,aj as G,k as e,o as u,c as U,a as o,w as r,b as I,$ as D,a0 as q,i as m,l as _,_ as H}from"./index-JmadfgZC.js";import{u as K}from"./country-UCFpeutj.js";import{a as Q}from"./setting_versionManagement-DkNxvVh_.js";const F={list:n=>V.post("tenant-control/getTenant",n),create:n=>V.post("tenant-control/insertTenant",n),edit:n=>V.post("tenant-control/updateTenantStatus",n),export:n=>V.post("tenant-control/exportTenantList",n,{responseType:"blob"}),reset:n=>V.post("tenant-user/resetPassword",n)},W=R("version",()=>{const n=c([]),k=J(async()=>{if(n.value.length)return n.value;const{data:v}=await Q.list();return v});return{versionMenu:n,getVersion:k}}),X=W,P="创建完成后，请告知用户初始密码：123456",Y=L({__name:"index",props:["id","row"],setup(n,{expose:k}){const v=n,M=K(),O=X(),p=c(!1),b=c(),l=c({id:v.id,name:"",password:"123456",country:"",companyName:"",taxID:"",legalPersonName:"",phone:"",email:"",version:"",active:1,registerType:"phone",type:"personal"}),f=JSON.parse(v.row),T=c([]),h=c([]),$=c({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],registerType:[{required:!0,message:"请选择注册方式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],type:[{required:!0,message:"请选择账户类型",trigger:"blur"}]});z(async()=>{p.value=!0,T.value=await M.getCountry,h.value=await O.getVersion,v.id&&(l.value=JSON.parse(v.row)),p.value=!1});function j(){l.value.registerType=l.value.country==="CN"?"phone":"email"}return k({submit(){return new Promise(C=>{if(l.value.id==="")b.value&&b.value.validate(t=>{t&&(p.value=!0,delete l.value.id,F.create(l.value).then(y=>{const{status:g,error:s}=y;E({type:g===1?"success":"warning",message:g===1?"新增成功":s,center:!0}),p.value=!1,C()}))});else{const{active:t,phone:y,email:g,id:s}=l.value,d={active:t,phone:y,email:g,id:s};b.value&&b.value.validate(w=>{w&&(p.value=!0,F.edit(d).then(x=>{const{status:N,error:S}=x;E({type:N===1?"success":"warning",message:N===1?"编辑成功":S,center:!0}),p.value=!1,C()}))})}})}}),(C,t)=>{const y=i("el-radio"),g=i("el-radio-group"),s=i("ElFormItem"),d=i("ElInput"),w=i("el-option"),x=i("el-select"),N=i("el-switch"),S=i("ElForm"),B=A("loading");return G((u(),U("div",null,[o(S,{ref_key:"formRef",ref:b,model:e(l),rules:e($),"label-width":"120px","label-suffix":"："},{default:r(()=>[o(s,{label:"账户类型",prop:"type"},{default:r(()=>[o(g,{modelValue:e(l).type,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).type=a),class:"ml-4"},{default:r(()=>[o(y,{value:"personal"},{default:r(()=>[I(" 个人 ")]),_:1}),o(y,{value:"company"},{default:r(()=>[I(" 公司 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"用户名",prop:"name"},{default:r(()=>[o(d,{modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).name=a),disabled:e(f).id,placeholder:"请输入用户名"},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"国家",prop:"country"},{default:r(()=>[o(x,{modelValue:e(l).country,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).country=a),disabled:e(f).id,"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:r(()=>[(u(!0),U(D,null,q(e(T),a=>(u(),m(w,{key:a.id,label:a.chineseName,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(l).type==="company"?(u(),m(s,{key:0,label:"公司名称",prop:"name"},{default:r(()=>[o(d,{modelValue:e(l).companyName,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).companyName=a),disabled:e(f).id,placeholder:"请输入公司名称"},null,8,["modelValue","disabled"])]),_:1})):_("",!0),e(l).type==="company"?(u(),m(s,{key:1,label:"公司税号",prop:"name"},{default:r(()=>[o(d,{modelValue:e(l).taxID,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).taxID=a),disabled:e(f).id,placeholder:"请输入公司税号"},null,8,["modelValue","disabled"])]),_:1})):_("",!0),e(l).type==="company"?(u(),m(s,{key:2,label:"法人姓名",prop:"name"},{default:r(()=>[o(d,{modelValue:e(l).legalPersonName,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).legalPersonName=a),disabled:e(f).id,placeholder:"请输入法人姓名"},null,8,["modelValue","disabled"])]),_:1})):_("",!0),e(l).country==="CN"?(u(),m(s,{key:3,label:"手机号码",prop:"phone"},{default:r(()=>[o(d,{modelValue:e(l).phone,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).phone=a),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})):_("",!0),e(l).country!=="CN"?(u(),m(s,{key:4,label:"电子邮箱",prop:"email"},{default:r(()=>[o(d,{modelValue:e(l).email,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})):_("",!0),o(s,{label:"初始密码",prop:"password"},{default:r(()=>[o(d,{modelValue:P,"onUpdate:modelValue":t[8]||(t[8]=a=>P=a),disabled:"",placeholder:"请输入登录密码"})]),_:1}),o(s,{label:"版本分配",prop:"version"},{default:r(()=>[o(x,{modelValue:e(l).version,"onUpdate:modelValue":t[9]||(t[9]=a=>e(l).version=a),disabled:e(f).id,placeholder:"请选择版本",onChange:j},{default:r(()=>[(u(!0),U(D,null,q(e(h),a=>(u(),m(w,{key:a.id,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"租户状态",prop:"active"},{default:r(()=>[o(N,{modelValue:e(l).active,"onUpdate:modelValue":t[10]||(t[10]=a=>e(l).active=a),"inline-prompt":"","active-text":"开启","inactive-text":"关闭","active-value":2,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[B,e(p)]])}}}),Z=H(Y,[["__scopeId","data-v-8a8c2d78"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as D,F as a,te as i,X as u};
