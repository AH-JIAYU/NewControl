
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import q from"./index-DMP8Lz1C.js";import{a as R}from"./setting_permissions--1DM7Ra6.js";import{f as $,B as I,r as u,X as M,q as J,h as n,ap as O,ai as S,k as t,o as _,c as U,a as e,w as a,i as y,b as i,l as z,aF as j,ao as K,_ as P}from"./index-BEQOMaLP.js";import"./menu-FZieu2Kg.js";const X=$({__name:"index",props:["id","auths"],setup(b){const m=b,E=I("success"),p=u(!1),k=u(),w=u(),l=u({visible:!1,id:"",path:"",keys:[],row:{}}),s=u({id:m.id,title:"",flat:!1,menu:"",data:[],menuData:[],choiceMenuData:[]}),g=u({menu:[{required:!0,message:"请选择路由地址",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],name:[{required:!0,message:"请输入key标识",trigger:"blur"}],label:[{required:!0,message:"请输入名称",trigger:"blur"}]});M(()=>m.auths,o=>{s.value.data=JSON.parse(o)},{deep:!0}),J(async()=>{s.value.id!==""&&x()});function x(){p.value=!0,s.value.data=JSON.parse(m.auths),s.value.flat=!!s.value.data.length,p.value=!1}function C(o){l.value.id=o.id,l.value.row=JSON.stringify(o),l.value.visible=!0}function V(o){j.confirm(`确认删除「${o.label}」吗？`,"确认信息").then(()=>{R.delete(o.id).then(()=>{K.success({message:"模拟删除成功",center:!0}),E()})}).catch(()=>{})}return(o,v)=>{const c=n("el-radio-button"),B=n("el-radio-group"),T=n("ElFormItem"),d=n("ElTableColumn"),h=n("ElButton"),D=n("ElTable"),F=n("ElForm"),N=O("loading");return S((_(),U("div",null,[e(F,{ref_key:"formRef",ref:k,rules:t(g),model:t(s),"label-width":"120px","label-suffix":"："},{default:a(()=>[(_(),y(D,{ref_key:"authsTableRef",ref:w,key:b.id,data:t(s).data,stripe:"","highlight-current-row":"",border:""},{default:a(()=>[e(d,{label:"类型",align:"center",prop:"type"},{default:a(r=>[e(T,{prop:`data.${r.$index}.type`,rules:t(g).type},{default:a(()=>[e(B,{modelValue:r.row.type,"onUpdate:modelValue":f=>r.row.type=f,disabled:""},{default:a(()=>[e(c,{value:"get",label:"get"},{default:a(()=>[i(" 读 ")]),_:1}),e(c,{value:"insert",label:"insert"},{default:a(()=>[i(" 写 ")]),_:1}),e(c,{value:"update",label:"update"},{default:a(()=>[i(" 改 ")]),_:1}),e(c,{value:"delete",label:"delete"},{default:a(()=>[i(" 删 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),e(d,{label:"权限KEY",prop:"name"}),e(d,{label:"对应接口",prop:"key"}),e(d,{label:"名称",prop:"label"}),e(d,{label:"名称"},{default:a(r=>[e(h,{type:"primary",size:"small",plain:"",onClick:f=>C(r.row)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),e(h,{type:"danger",size:"small",plain:"",onClick:f=>V(r.row)},{default:a(()=>[i(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1},8,["rules","model"]),t(l).visible?(_(),y(q,{key:0,id:t(l).id,modelValue:t(l).visible,"onUpdate:modelValue":v[0]||(v[0]=r=>t(l).visible=r),row:t(l).row},null,8,["id","modelValue","row"])):z("",!0)])),[[N,t(p)]])}}}),L=P(X,[["__scopeId","data-v-8c0a27d4"]]);export{L as default};
