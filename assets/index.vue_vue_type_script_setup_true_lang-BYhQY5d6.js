
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as V}from"./setting_questionnaireLibrary-Bie1uPho.js";import{u as q}from"./country-CeZa5mKt.js";import{f as z,m as b,u as D,r as d,y as J,g as L,h as n,o as f,c as E,a as o,w as s,b as w,k as a,$ as O,a0 as T,ai as k,i as $}from"./index-CGs043Wj.js";const H=z({__name:"index",props:b(["id","row"],{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:b(["success"],["update:modelValue"]),setup(y,{emit:x}){const r=y,v=x,I=q(),i=D(y,"modelValue"),_=d([]),u=d(),t=d({categoryName:"",countryId:null,status:2}),N=d({categoryName:[{required:!0,message:"请输入问卷名称",trigger:"blur"}],countryId:[{required:!0,message:"请选择国家",trigger:"blur"}]});J(async()=>{_.value=await I.getCountry});const C=L(()=>(t.value={},r.id&&(t.value=JSON.parse(r.row)),r.id===""?"新增":"编辑"));async function B(){r.id?u.value&&u.value.validate(async c=>{if(c){const{status:e}=await V.edit(t.value);e===1&&k.success({message:"编辑成功",center:!0}),m(),v("success")}}):u.value&&u.value.validate(async c=>{if(c){const{status:e}=await V.create(t.value);e===1&&k.success({message:"新增成功",center:!0}),m(),v("success")}})}function m(){i.value=!1}return(c,e)=>{const S=n("ElInput"),p=n("ElFormItem"),F=n("el-option"),M=n("el-select"),U=n("ElSwitch"),h=n("ElForm"),g=n("ElButton"),R=n("ElDialog");return f(),E("div",null,[o(R,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),title:a(C),width:"50%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:s(()=>[o(g,{size:"large",onClick:m},{default:s(()=>[w(" 取消 ")]),_:1}),o(g,{type:"primary",size:"large",onClick:B},{default:s(()=>[w(" 确定 ")]),_:1})]),default:s(()=>[o(h,{ref_key:"formRef",ref:u,model:a(t),rules:a(N),"label-width":"120px","label-suffix":"："},{default:s(()=>[o(p,{label:"名称",prop:"categoryName"},{default:s(()=>[o(S,{modelValue:a(t).categoryName,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).categoryName=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(p,{label:"国家",prop:"countryId"},{default:s(()=>[o(M,{modelValue:a(t).countryId,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).countryId=l),"value-key":"",placeholder:"请选择国家",clearable:"",filterable:""},{default:s(()=>[(f(!0),E(O,null,T(a(_).records,l=>(f(),$(F,{key:l.id,label:l.chineseName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"状态"},{default:s(()=>[o(U,{modelValue:a(t).status,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).status=l),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"开启","inactive-text":"禁用",placeholder:"请输入状态"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{H as _};
